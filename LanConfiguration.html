<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    <link rel="stylesheet" href="css/bootstrap/3.3.7/bootstrap.min.css">

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap/3.3.7/bootstrap.min.js"></script>
    <link href="css/style.css?mv=20210611" rel="stylesheet" />
    <link href="css/jquery.ipinput.css" rel="stylesheet" />
    <script src="js/lanConfiguration.js?mv=20210611"></script>
    <script src="js/jquery.ipinput.js"></script>
    <script src="layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/common.js?mv=20210611"></script>
    <title>Document</title>
    <style>
        .btn-primary.active {
            color: #fff;
            background-color: #03387f !important;
            border-color: #03387f !important;
        }
        
        .LAN-configuration {
            font-family: "OpenSans-Semibold";
            font-size: 44px;
            font-weight: 600;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.36;
            letter-spacing: normal;
            text-align: left;
            color: #343434;
        }
        
        .btn1 {
            position: absolute;
            top: 31px;
            right: 70px;
        }
        
        .Path-101 {
            width: 138px;
            height: 52px;
            border: solid 1px #707070;
            background-color: #f1f1f1;
            border-radius: 5px;
        }
        
        .Path-101:hover {
            background-color: #009fe3;
            color: #fff;
        }
        
        .Cancel {
            font-family: OpenSans;
            font-size: 22px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.45;
            letter-spacing: normal;
            text-align: center;
            color: #434343;
        }
        
        .Rectangle-1182:hover {
            background-color: #009fe3;
            color: #fff;
        }
        
        .Rectangle-1182.active {
            background-color: #009fe3;
        }
        
        .Rectangle-1182 {
            width: 138px;
            height: 52px;
            /* padding: 0 20px; */
            border-radius: 5px;
            background-color: #009fe3;
            color: #fff;
        }
        
        .OK {
            font-family: "OpenSans-Semibold";
            font-size: 22px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.35;
            letter-spacing: normal;
            text-align: center;
            color: #ffffff;
            margin-left: 22px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group div p {
            padding-top: 7px;
        }
        
        .Automatically-DHCP-on {
            font-family: OpenSans;
            font-size: 18px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.44;
            letter-spacing: normal;
            text-align: left;
            color: #3a3a3a;
        }
        
        .form-control {
            padding: 3px 10px;
        }
        
        .Configure-IP {
            font-family: OpenSans;
            font-size: 18px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.33;
            letter-spacing: normal;
            text-align: left;
            color: #343434;
        }
        
        .For-correct-operation-with-Raymarine-MFDs-ensure-that-IP-configuration-is-set-to-automatic {
            opacity: 0.74;
            font-family: OpenSans;
            font-size: 14px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.43;
            letter-spacing: normal;
            text-align: left;
            color: #343434;
        }
        
        .form-horizontal .control-label {
            padding-top: 7px;
            margin-bottom: 0;
            text-align: left;
            color: #333;
        }
        
        .DHCP-server {
            font-size: 22px;
            font-weight: 600;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.36;
            letter-spacing: normal;
            text-align: left;
            color: #333333;
        }
        
        .ipinput_div input[type="text"] {
            font-family: OpenSans;
            font-size: 18px;
            font-weight: normal;
            text-align: left;
            color: #343434;
        }
        
        .ip_input {
            width: 38px;
            height: 32px;
            line-height: 32px;
            /* color: #000000; */
            border: 0px;
            text-align: center;
            position: relative;
            top: -3px;
        }
        
        .all_input {
            position: relative;
            width: 202px;
            width: 40%;
            /* height: 20px; */
            /* font: normal 8px 宋体; */
            /* color: #000000; */
            /* border: 1px solid #000000; */
            text-align: center;
        }
        /* .all_input span {
            width: 12px;
            height: 32px;
            position: relative;
            display: inline-block;
            border: 1px solid #f00
        } */
        
        .w358 {
            width: 358px;
        }
        
        .width40 {
            width: 40% !important
        }
        
        .Rectangle-1282 {
            min-width: 100px !important;
            height: 34px;
            border-radius: 5px;
            border: solid 1px #707070;
        }
        
        .Rectangle-1269 {
            width: 204px;
            height: 41px;
            box-shadow: 0 3px 6px 0 rgba(0, 0, 0, 0.16);
            border: solid 2px #26b167;
            background-color: #f9fffc;
            background: url("images/correct.png") no-repeat 5px 4px
        }
        
        .error-icon {
            width: auto;
            height: 41px;
            box-shadow: 0 3px 6px 0 rgba(0, 0, 0, 0.16);
            border: solid 2px #b12626;
            background-color: #f9fffc;
            background: url("images/icon-info.png") no-repeat 5px 4px
        }
        
        .Password-successfully-changed {
            font-family: OpenSans;
            font-size: 18px;
            font-weight: 600;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.44;
            letter-spacing: normal;
            text-align: left;
            color: #343434;
            padding: 5px 10px 5px 40px;
        }
        
        .Changes-saved {
            font-family: OpenSans;
            font-size: 18px;
            font-weight: 600;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.44;
            letter-spacing: normal;
            text-align: left;
            color: #343434;
        }
        
        #success {
            display: none;
            position: fixed;
            top: 20%;
            right: 500px;
            z-index: 999;
            background-color: #fff;
        }
        
        #error {
            display: none;
            position: fixed;
            top: 50px;
            right: 500px;
            z-index: 999;
            background-color: #fff;
        }
        
        .layui-layer-loading .layui-layer-loading2 {
            background-position: 30px 0;
        }
        
        @media screen and (max-width: 1192px) {
            .LAN-configuration {
                font-size: 30px;
            }
            .Path-101 {
                width: 120px;
                height: 40px;
            }
            .Rectangle-1182 {
                width: 120px;
                height: 40px;
            }
        }
    </style>
</head>

<body>
    <div class="container-fluid" style="margin:30px 70px;">
        <div class="row">
            <div>
                <div style="position:relative;margin-bottom:40px;border-bottom: solid 1px #ddd;padding-bottom: 10px;" class="LAN-configuration">Ethernet configuration
                </div>
            </div>

            <div id="success" class="Rectangle-1269 Password-successfully-changed Changes-saved">Changes-saved</div>
            <div id="error" class="error-icon Password-successfully-changed Changes-saved"></div>
            <div class="form-horizontal" name="formdata" id="content">
                <div class="form-group" id="ipMode">
                    <label for="" class="col-sm-4 control-label Configure-IP" style="color:#3a3a3a;">Configure IP:
                        <div
                            class="For-correct-operation-with-Raymarine-MFDs-ensure-that-IP-configuration-is-set-to-automatic">
                            IP configuration is for advanced users and shouldn't be changed unless for a specific
                            reason. Changing from automatic configuration will affect compatibility with Raymarine MFDs
                        </div>
                    </label>

                    <div class="col-sm-8 selectContent">
                        <select class="form-control width100 Automatically-DHCP-on" id="rsd" style="width:263px;border: solid 1px #707070;">
                            <option value="Automatically (DHCP on)">Automatically (DHCP on)
                            </option>
                            <option value="Manually (DHCP off)">Manually (DHCP off)</option>
                            <option value="Manually (DHCP on)">Manually (DHCP on)</option>

                        </select>
                    </div>
                </div>
                <div id="main">
                    <div id="d1">
                        <!-- <div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">IP address1:</label>
                                <div class="col-sm-8">
                                    <p class="Configure-IP" id="ip_1">192.143.1.1</p>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">IP address2:</label>
                                <div class="col-sm-8">
                                    <p class="Configure-IP" id="ip_2">192.143.1.1</p>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">IP netmask:</label>
                                <div class="col-sm-8">
                                    <p class="Configure-IP" id="netmask">255.255.255.0</p>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">Gateway:</label>
                                <div class="col-sm-8">
                                    <p class="Configure-IP" id="gateway">255.255.255.0</p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <h4 class="DHCP-server">DHCP server settings</h4>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">Start IP address:</label>
                                <div class="col-sm-8">
                                    <p class="Configure-IP" id="start_ip">255.255.255.0</p>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">End IP address:</label>
                                <div class="col-sm-8">
                                    <p class="Configure-IP" id="end_ip">255.255.255.0</p>
                                </div>
                            </div>
                            <div class="form-group form-inline">
                                <label for="" class="col-sm-4 control-label Configure-IP">DHCP lease time:</label>
                                <div class="col-sm-8">
                                    <p class="Configure-IP"><span id="lease_time"></span></p>
                                </div>
                            </div>
                            <div class="btn1" id="btn01">
                                <span class="qx" style="display: inline-block;margin-left:148px;"><button id="cancel" class="Path-101 Cancel">Cancel</button></span>
                                <span class="connected" style="display: inline-block;"><button id="btn" class="Rectangle-1182 active OK">Save</button></span>
                            </div>
                        </div> -->
                    </div>
                    <div id="d2" style="display: none;">
                        <div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">IP address:</label>
                                <div class="col-sm-8">
                                    <input class="form-control Configure-IP" id="ip1" type="text" name="ip" />
                                </div>
                            </div>
                            <div class="form-group" style="display: none;">
                                <label for="" class="col-sm-4 control-label Configure-IP">IP address2:</label>
                                <div class="col-sm-8">
                                    <input class="form-control Configure-IP" id="ip2" type="text" name="ip" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">Subnet mask:</label>
                                <div class="col-sm-8">
                                    <input class="form-control Configure-IP" id="net_mask" type="text" name="ip" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">Gateway:</label>
                                <div class="col-sm-8">
                                    <input class="form-control Configure-IP" id="Gate_way" type="text" name="ip" />
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <h4 class="DHCP-server">DHCP server settings</h4>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">Start IP address:</label>
                                <div class="col-sm-8">
                                    <input class="form-control Configure-IP" id="startip" type="text" name="ip" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="" class="col-sm-4 control-label Configure-IP">End IP address:</label>
                                <div class="col-sm-8">
                                    <input class="form-control Configure-IP" id="endip" type="text" name="ip" />
                                </div>
                            </div>
                            <div class="form-group form-inline">
                                <label for="" class="col-sm-4 control-label Configure-IP">DHCP lease time:</label>
                                <div class="col-sm-8">
                                    <input type="number" id="leasetime" class="form-control Rectangle-1282 Configure-IP" name="sec" placeholder="" style="border: solid 1px #707070;"><span style="margin-left:10px;">seconds</span>
                                </div>
                            </div>
                            <div class="btn1" id="btn02">
                                <span class="qx" style="display: inline-block;margin-left:148px;"><button id="cancel2"
                                        class="Path-101 Cancel">Cancel</button></span>
                                <span class="connected" style="display: inline-block;"><button id="btn2"
                                        class="Rectangle-1182 active OK">Save</button></span>
                            </div>
                        </div>
                    </div>
                    <div id="d3" style="display: none;">
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">IP address1:</label>
                            <div class="col-sm-8">
                                <input class="form-control Configure-IP" id="ipaddress1" type="text" name="ip" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">IP address2:</label>
                            <div class="col-sm-8">
                                <input class="form-control Configure-IP" id="ipaddress2" type="text" name="ip" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">Subnet mask:</label>
                            <div class="col-sm-8">
                                <input class="form-control Configure-IP" id="ipnetmask" type="text" name="ip" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">Gateway:</label>
                            <div class="col-sm-8">
                                <input class="form-control Configure-IP" id="Gateway1" type="text" name="ip" />
                            </div>
                        </div>
                        <div class="btn1" id="btn03">
                            <span class="qx" style="display: inline-block;margin-left:148px;"><button id="cancel3"
                                    class="Path-101 Cancel">Cancel</button></span>
                            <span class="connected" style="display: inline-block;"><button id="btn3"
                                    class="Rectangle-1182 active OK">Save</button></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        var loading, interval, t = 10,
            timer = null;;
        var frequency = 0;
        $(function() {
            $(window).on('beforeunload', function() {
                clearInterval(timer);
            });
            $("#cancel2").on("click", function() {
                eco_refresh('my-iframe')
            });
            $("#cancel3").on("click", function() {
                eco_refresh('my-iframe')
            });
            layui.use('layer', function() {
                var layer = layui.layer;
                var loading = layer.load(0, {
                    shade: false
                });
                getLanData(layer, loading);
            });
            $("#btn2").on("click", function() {

                var leasetime = $('#leasetime').val();
                var toing = true;
                if (Number(leasetime) > 172800) {
                    layui.use(['form', 'layer'], function() {
                        var layer = layui.layer;
                        layer.msg("Lease time cannot be greater than 172800S!");
                        toing = false;
                    })
                    if (!toing) {
                        return;
                    }
                }
                if (Number(leasetime) < 60) {
                    layui.use(['form', 'layer'], function() {
                        var layer = layui.layer;
                        layer.msg("Lease time must be greater than 60s!");
                    })
                    return;
                }
                var data = {
                    "jsonrpc": "2.0",
                    "method": "LanConfigure",
                    "params": {
                        "mode": 1,

                        "ip_1": $('#ip1_ipinput input[name="ipOne"]').val() + '.' + $(
                            '#ip1_ipinput input[name="ipTwo"]').val() + '.' + $(
                            '#ip1_ipinput input[name="ipThree"]').val() + '.' + $(
                            '#ip1_ipinput input[name="ipFour"]').val(),
                        "ip_2": "",
                        "netmask": $('#net_mask_ipinput input[name="ipOne"]').val() + '.' + $(
                            '#net_mask_ipinput input[name="ipTwo"]').val() + '.' + $(
                            '#net_mask_ipinput input[name="ipThree"]').val() + '.' + $(
                            '#net_mask_ipinput input[name="ipFour"]').val(),
                        "gateway": $('#Gate_way_ipinput input[name="ipOne"]').val() + '.' + $(
                            '#Gate_way_ipinput input[name="ipTwo"]').val() + '.' + $(
                            '#Gate_way_ipinput input[name="ipThree"]').val() + '.' + $(
                            '#Gate_way_ipinput input[name="ipFour"]').val(),
                        "start_ip": $('#startip_ipinput input[name="ipOne"]').val() + '.' + $(
                            '#startip_ipinput input[name="ipTwo"]').val() + '.' + $(
                            '#startip_ipinput input[name="ipThree"]').val() + '.' + $(
                            '#startip_ipinput input[name="ipFour"]').val(),
                        "end_ip": $('#endip_ipinput input[name="ipOne"]').val() + '.' + $(
                            '#endip_ipinput input[name="ipTwo"]').val() + '.' + $(
                            '#endip_ipinput input[name="ipThree"]').val() + '.' + $(
                            '#endip_ipinput input[name="ipFour"]').val(),
                        "lease_time": Number($('#leasetime').val())
                    },
                    "id": "9.1"
                }

                data = JSON.stringify(data);
                $.ajax({
                    type: "post",
                    url: "/action/action",
                    data: data,
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    success: function(res) {
                        if (res.result) {
                            // layui.use('layer', function () {
                            //     var layer = layui.layer;
                            //     layer.msg('不开心。。', {icon: 1});
                            // });
                            ejectTip();
                            $("#btn2").removeAttr("disabled");
                            $("#btn2").css("opacity", "1");
                            $("#cancel").removeAttr("disabled");
                            $("#cancel").css("opacity", "1");
                        } else if (res.error) {
                            $("#error").text(res.error.message)
                            $("#error").show(1000).delay(6000).hide(0);
                            $("#btn2").removeAttr("disabled");
                            $("#btn2").css("opacity", "1");
                            $("#cancel").removeAttr("disabled");
                            $("#cancel").css("opacity", "1");
                        }

                    },
                    error: function(jqXHR) {
                        console.log("Error message", JSON.stringify(jqXHR))
                        parent.layer.close(loading);
                        var tip =
                            '<div style="padding: 20px;text-align: center;word-wrap:break-word;">Abnormal communication, please try again later!</div>';
                        promptMessage("Error message", tip);
                    }
                });
            })

            $("#btn3").on("click", function() {

                var data = {
                    "jsonrpc": "2.0",
                    "method": "LanConfigure",
                    "params": {
                        "mode": 2,
                        "ip_1": $('#ipaddress1_ipinput input[name="ipOne"]').val() + '.' + $(
                            '#ipaddress1_ipinput input[name="ipTwo"]').val() + '.' + $(
                            '#ipaddress1_ipinput input[name="ipThree"]').val() + '.' + $(
                            '#ipaddress1_ipinput input[name="ipFour"]').val(),
                        "ip_2": $('#ipaddress2_ipinput input[name="ipOne"]').val() + '.' + $(
                            '#ipaddress2_ipinput input[name="ipTwo"]').val() + '.' + $(
                            '#ipaddress2_ipinput input[name="ipThree"]').val() + '.' + $(
                            '#ipaddress2_ipinput input[name="ipFour"]').val(),
                        "netmask": $('#ipnetmask_ipinput input[name="ipOne"]').val() + '.' + $(
                            '#ipnetmask_ipinput input[name="ipTwo"]').val() + '.' + $(
                            '#ipnetmask_ipinput input[name="ipThree"]').val() + '.' + $(
                            '#ipnetmask_ipinput input[name="ipFour"]').val(),
                        "gateway": $('#Gateway1_ipinput input[name="ipOne"]').val() + '.' + $(
                            '#Gateway1_ipinput input[name="ipTwo"]').val() + '.' + $(
                            '#Gateway1_ipinput input[name="ipThree"]').val() + '.' + $(
                            '#Gateway1_ipinput input[name="ipFour"]').val(),
                        "start_ip": "",
                        "end_ip": "",
                        "lease_time": Number($('#leasetime').val()),
                    },
                    "id": "9.1"
                }

                data = JSON.stringify(data);
                $.ajax({
                    type: "post",
                    url: "/action/action",
                    data: data,
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    success: function(res) {
                        console.log(data);
                        if (res.result) {
                            ejectTip();
                            $("#btn3").removeAttr("disabled");
                            $("#btn3").css("opacity", "1");
                            $("#cancel").removeAttr("disabled");
                            $("#cancel").css("opacity", "1");
                        } else if (res.error) {
                            $("#error").text(res.error.message)
                            $("#error").show(1000).delay(6000).hide(0);
                            $("#btn3").removeAttr("disabled");
                            $("#btn3").css("opacity", "1");
                            $("#cancel").removeAttr("disabled");
                            $("#cancel").css("opacity", "1");
                        }

                    },
                    error: function(jqXHR) {
                        console.log("Error message", JSON.stringify(jqXHR))
                        parent.layer.close(loading);
                        var tip =
                            '<div style="padding: 20px;text-align: center;word-wrap:break-word;">Abnormal communication, please try again later!</div>';
                        promptMessage("Error message", tip);
                    }
                });
            })

        });

        function timeConversion(millisec) {
            var seconds = (millisec).toFixed(0);
            //return seconds + " seconds";
            return seconds;
        }

        function getLanData(layer, loading) {
            var data = {
                "jsonrpc": "2.0",
                "method": "LanConfigure",
                "params": {
                    "mode": 3,
                    "ip_1": "",
                    "ip_2": "",
                    "netmask": "",
                    "gateway": "",
                    "start_ip": "",
                    "end_ip": "",
                    "lease_time": ""
                },
                "id": "9.1"
            }

            data = JSON.stringify(data);
            $.ajax({
                type: "post",
                url: "/action/action",
                data: data,
                dataType: "json",
                contentType: "application/json;charset=utf-8",
                success: function(res) {
                    layer.close(loading);
                    var json = res.result;
                    //console.log(data);
                    var str = "";
                    //var channelArr = ["Automatically (DHCP on)", "Manually (DHCP on)", "Manually (DHCP off)"];
                    if (json.mode == '0') {
                        $('#d1').show();
                        $('#d2').hide();
                        $('#d3').hide();
                        $('#btn').show();
                        $('.selectContent option[value="Automatically (DHCP on)"]').prop("selected",
                            "selected");
                        //console.log(0);
                    }
                    if (json.mode == '1') {
                        $('#d2').show();
                        $('#d1').hide();
                        $('#d3').hide();
                        $('.selectContent option[value="Manually (DHCP on)"]').prop("selected",
                            "selected");
                        // console.log(1);
                    }

                    if (json.mode == '2') {
                        $('#d3').show();
                        $('#d2').hide();
                        $('#d1').hide();
                        //alert(2);
                        $('.selectContent option[value="Manually (DHCP off)"]').prop("selected",
                            "selected");
                        //console.log(2);
                    }


                    $('input[name="ip"]').eq(0).ipinput({
                        value: json.ip_1
                    });
                    $('input[name="ip"]').eq(1).ipinput({
                        value: json.ip_2
                    });
                    $('input[name="ip"]').eq(2).ipinput({
                        value: json.netmask
                    });
                    $('input[name="ip"]').eq(3).ipinput({
                        value: json.gateway
                    });
                    $('input[name="ip"]').eq(4).ipinput({
                        value: json.start_ip
                    });
                    $('input[name="ip"]').eq(5).ipinput({
                        value: json.end_ip
                    });
                    var lease = $('input[name="sec"]').eq(0).val(json.lease_time);
                    //console.log(lease.val());
                    //console.log(json);

                    $('input[name="ip"]').eq(6).ipinput({
                        value: json.ip_1
                    });
                    $('input[name="ip"]').eq(7).ipinput({
                        value: json.ip_2
                    });
                    $('input[name="ip"]').eq(8).ipinput({
                        value: json.netmask
                    });
                    $('input[name="ip"]').eq(9).ipinput({
                        value: json.gateway
                    });

                    for (var index in json) {
                        str = `
                     
                            <div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">IP address1:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP" id="ip_1">${json.ip_1}</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">IP address2:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP" id="ip_2">${json.ip_2}</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">Subnet mask:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP" id="netmask">${json.netmask}</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">Gateway:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP" id="gateway">${json.gateway}</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <div class="col-sm-4">
                                <h4 class="DHCP-server">DHCP server settings</h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">Start IP address:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP" id="start_ip">${json.start_ip}</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">End IP address:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP" id="end_ip">${json.end_ip}</p>
                            </div>
                        </div>
                        <div class="form-group form-inline">
                            <label for="" class="col-sm-4 control-label Configure-IP">DHCP lease time:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP"><span id="lease_time">${timeConversion(json.lease_time)}</span><span style="margin-left:10px;">seconds</span></p>
                            </div>
                        </div>
                        
                        <div class="btn1" id="btn01">
                                <span class="qx" style="display: inline-block;margin-left:148px;"><button id="cancel1" class="Path-101 Cancel">Cancel</button></span>
                                <span class="connected" style="display: inline-block;"><button id="btn1" class="Rectangle-1182 active OK">Save</button></span>
                            </div>
                    </div>
                   
                    `
                            //     str2 = `
                            // <div>
                            //         <div class="form-group">
                            //             <label for="" class="col-sm-4 control-label Configure-IP">IP address1:</label>
                            //             <div class="col-sm-8">
                            //                 <input class="form-control Configure-IP" id="ip1" type="text" name="ip" value="${json.ip_1}"/>
                            //             </div>
                            //         </div>
                            //         <div class="form-group">
                            //             <label for="" class="col-sm-4 control-label Configure-IP">IP address2:</label>
                            //             <div class="col-sm-8">
                            //                 <input class="form-control Configure-IP" id="ip2" type="text" name="ip"  value="${json.ip_2}"/>
                            //             </div>
                            //         </div>
                            //         <div class="form-group">
                            //             <label for="" class="col-sm-4 control-label Configure-IP">IP subnet mask:</label>
                            //             <div class="col-sm-8">
                            //                 <input class="form-control Configure-IP" id="net_mask" type="text" name="ip" value="${json.netmask}"/>
                            //             </div>
                            //         </div>
                            //         <div class="form-group">
                            //             <label for="" class="col-sm-4 control-label Configure-IP">Gateway:</label>
                            //             <div class="col-sm-8">
                            //                 <input class="form-control Configure-IP" id="Gate_way" type="text" name="ip"  value="${json.gateway}"/>
                            //             </div>
                            //         </div>
                            //     </div>
                            //     <div>
                            //         <div class="form-group">
                            //             <div class="col-sm-4">
                            //                 <h4 class="DHCP-server">DHCP server settings</h4>
                            //             </div>
                            //         </div>
                            //         <div class="form-group">
                            //             <label for="" class="col-sm-4 control-label Configure-IP">Start IP address:</label>
                            //             <div class="col-sm-8">
                            //                 <input class="form-control Configure-IP" id="startip" type="text" name="ip" value="${json.start_ip}"/>
                            //             </div>
                            //         </div>
                            //         <div class="form-group">
                            //             <label for="" class="col-sm-4 control-label Configure-IP">End IP address:</label>
                            //             <div class="col-sm-8">
                            //                 <input class="form-control Configure-IP" id="endip" type="text" name="ip"  value="${json.end_ip}"/>
                            //             </div>
                            //         </div>
                            //         <div class="form-group form-inline">
                            //             <label for="" class="col-sm-4 control-label Configure-IP">DHCP lease time:</label>
                            //             <div class="col-sm-8">
                            //                 <input type="text" id="leasetime" class="form-control Rectangle-1282 Configure-IP" placeholder="120" style="border: solid 1px #707070;" value="${timeConversion(json.lease_time)}"><span style="margin-left:10px;">seconds</span>
                            //             </div>
                            //         </div>
                            //         <div class="btn1" id="btn02">
                            //             <span class="qx" style="display: inline-block;margin-left:148px;"><button id="cancel" class="Path-101 Cancel">Cancel</button></span>
                            //             <span class="connected" style="display: inline-block;"><button id="btn2" class="Rectangle-1182 active OK">Save</button></span>
                            //         </div>
                            //     </div>
                            // `

                    }

                    $("#d1").html(str);
                    $("#cancel1").on("click", function() {
                        eco_refresh('my-iframe')
                    });
                    $("#btn1").on("click", function() {

                        var data = {
                            "jsonrpc": "2.0",
                            "method": "LanConfigure",
                            "params": {
                                "mode": 0,
                                "ip_1": "",
                                "ip_2": "",
                                "netmask": "",
                                "gateway": "",
                                "start_ip": "",
                                "end_ip": "",
                                "lease_time": ""
                            },
                            "id": "9.1"
                        }

                        data = JSON.stringify(data);
                        $.ajax({
                            type: "post",
                            url: "/action/action",
                            data: data,
                            dataType: "json",
                            contentType: "application/json;charset=utf-8",
                            success: function(res) {
                                if (res.result) {

                                    ejectTip();

                                } else if (res.error) {
                                    $("#error").text(res.error.message)
                                    $("#error").show(1000).delay(6000).hide(0);

                                }

                            },
                            error: function(jqXHR) {
                                console.log("Error message", JSON.stringify(jqXHR))
                                parent.layer.close(loading);
                                var tip =
                                    '<div style="padding: 20px;text-align: center;word-wrap:break-word;">Abnormal communication, please try again later!</div>';
                                promptMessage("Error message", tip);
                            }
                        });
                    })

                },
                error: function(jqXHR) {
                    console.log("Error message", JSON.stringify(jqXHR))
                    frequency++;
                    if (frequency < 3) {
                        setTimeout(() => {
                            getLanData(layer, loading);
                        }, 5000);
                    } else {
                        frequency = 0;
                        layer.close(loading);
                        var tip =
                            '<div style="padding: 20px;text-align: center;word-wrap:break-word;">Abnormal communication!</div>';
                        promptMessage("Error message", tip);
                    }

                }
            });
        }

        function ejectTip() {

            var loading = parent.layer.msg('Waiting for changes to be applied...', {
                icon: 16,
                time: false,
                shade: [0.5, '#fff'],
                success: function(layero, index) {
                    var msg = layero.text();
                    console.log(msg)
                    var i = 20;
                    timer = null;
                    var fn = function() {
                        layero.find(".layui-layer-content").html(
                            '<i class="layui-layer-ico layui-layer-ico16"></i>' + msg + '(' + i +
                            's)');
                        if (!i) {
                            parent.layer.close(index);
                            clearInterval(timer);
                            $('#success').show(1000).delay(6000).hide(0);
                            eco_refresh('my-iframe');

                        }
                        i--;
                    };
                    timer = setInterval(fn, 1000);
                    fn();
                },
            });

        }
    </script>

</body>

</html>