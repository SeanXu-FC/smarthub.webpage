<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">
    <link rel="stylesheet" href="css/bootstrap/3.3.7/bootstrap.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap/3.3.7/bootstrap.min.js"></script>
    <link rel="stylesheet" href="layui/css/layui.css" media="all">
    <link href="css/style.css?mv=20210330" rel="stylesheet" />
    <script type="text/javascript" src="js/common.js?mv=20210330"></script>
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0
        }
        
        .Rectangle-1182:hover {
            background-color: #861f41;
            color: #fff;
        }
        
        .Rectangle-1182.active {
            background-color: #861f41;
        }
        
        .Password-is-incorrect {
            font-family: OpenSans;
            font-size: 18px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.33;
            letter-spacing: normal;
            text-align: left;
            color: #ff002a;
            margin-left: 90px;
            margin-top: 10px;
        }
        
        .Rectangle-1185 {
            width: 235px;
            height: 32px;
            border-radius: 5px;
            border: solid 1px #707070;
            padding: 5px 10px;
        }
        
        #pwd {
            padding: 5px 10px
        }
        

        
        .forget-pwd {
            color: #861f41;
            margin: 15px 0 10px 104px;
            font-family: OpenSans;
            font-size: 18px;
            font-weight: normal;
        }
        
        .admin-password-tip {
            margin: 17px 60.5px 27.5px 0.5px;
            font-family: OpenSans;
            font-size: 18px;
            text-align: left;
            color: #343434;
        }
        
        .Path-101 {
            width: 114px;
            height: 50px;
            border: solid 1px #707070;
            background-color: #f1f1f1;
            border-radius: 5px;
        }
        
        .Path-101:hover {
            background-color: #5a5a5a;
            color: #fff !important;
        }
        
        .Rectangle-1182:hover {
            background-color: #861f41;
            color: #fff;
        }
        
        .Rectangle-1182.active {
            background-color: #861f41;
        }
        
        .Rectangle-1182.active:disabled {
            background-color: #861f41;
        }
        
        .Cancel {
            /* width: 62px;
  height: 27px; */
            font-family: OpenSans;
            font-size: 20px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.45;
            letter-spacing: normal;
            text-align: center;
            color: #343434;
        }
        
        .OK {
            /* width: 28px;
            height: 27px; */
            font-family: OpenSans;
            font-size: 20px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.35;
            letter-spacing: normal;
            text-align: center;
            color: #ffffff;
        }
        
        .Password-is-incorrect {
            font-family: OpenSans;
            font-size: 18px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.33;
            letter-spacing: normal;
            text-align: left;
            color: #ff002a;
            margin-left: 90px;
            margin-top: 10px;
        }
        
        .Rectangle-1185 {
            width: 235px;
            height: 32px;
            border-radius: 5px;
            border: solid 1px #707070;
            padding: 5px 10px;
        }
        
        .Enter-the-password-for-network-Mynetwork1 {
            font-family: OpenSans;
            font-size: 24px;
            font-weight: 600;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.42;
            letter-spacing: normal;
            text-align: left;
            color: #343434;
        }
        
        .Password {
            /* width: 86px; */
            height: 24px;
            font-family: OpenSans;
            font-size: 18px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.61;
            letter-spacing: normal;
            text-align: left;
            color: #343434;
            margin-left: 0px;
        }
        
        .Rectangle-1188 {
            width: 344px;
            height: 40px;
            border-radius: 5px;
            border: solid 1px #707070;
            background-color: #ffffff;
        }
        
        .Rectangle-1187 {
            width: 500px;
            height: 440px;
            border-radius: 5px;
            /* border: solid 1px #707070; */
            background-color: #ffffff;
        }
        
        .Rectangle-1182 {
            width: 124px;
            height: 50px;
            /* padding: 0 20px; */
            border-radius: 5px;
            background-color: #861f41;
            color: #fff;
        }
        
        #pwd {
            padding: 5px 10px
        }
        
        .error {
            color: #ff002a;
            display: none;
            margin: 10px 0 10px 104px;
            font-size: 18px;
  font-weight: normal;
  text-align: left;
  color: #ff002a;
        }
        
        .wirelessInfo {
            padding: 20px 40px;
            margin: 20px 0px;
            overflow-y: auto;
            height: 100%;
        }
        
        .Connected {
            font-family: OpenSans;
            font-size: 18px;
            font-weight: 600;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.61;
            letter-spacing: normal;
            text-align: left;
            color: #343434;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
        }
        
        .layui-form {
            position: relative;
        }
        
        .layui-layer-iframe {
            overflow: hidden !important;
            overflow-y: hidden !important;
        }
        
        html,
        body {
            height: 100%;
        }
        
        .SHOW {
            position: absolute;
            top: 12px;
            right: 10px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            color: #861f41;
        }
    </style>
</head>

<body>
    <div class="container wirelessInfo form-inline" id="wirelessInfo">
        <div class="layui-form">
            <div class="row">
                <h3 class="Enter-admin-password Enter-the-password-for-network-Mynetwork1">Enter admin password
                </h3>
                <p class="admin-password-tip mt-20">Enter the admin password to make changes</p>
            </div>
            <form name="details" onsubmit="return false" action="##" method="post" id="loginInfo" class="form-horizontal">
                <div class="row" style="position:relative">
                    <label class="Password mt-20" style="display: inline-block;">Password:</label>
                    <input type="text" id="account" value="admin" name="username" class="form-control" style="display:none">
                    <div style="display: inline-block;position: relative;">
                        <input type="password" value="" id="pwd" name="password" class="Rectangle-1188 pwd" oninput="WidthCheckIO(this,64);" style="display: inline-block;" />
                        <span class="SHOW">SHOW</span>

                    </div>
                    <div class="error">Password is incorrect</div>
                    <div class="forget-pwd">Forgot password?</div>
                </div>
            </form>
            <div class="row pt-30 mb-20">
                <span class="col-md-2 col-md-offset-4" style="display: inline-block;margin-left:148px;"><button
                        id="cancel" class=" Path-101 Cancel">Cancel</button></span>
                <span class="col-md-4 col-md-offset-2 connected" style="display: inline-block;"><button id="btn"
                        class="Rectangle-1182 active OK">Ok</button></span>
            </div>
        </div>
    </div>

    <script src="layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/common.js?mv=20210330"></script>
    <script>
        var srcStr;
        $(function() {
            srcStr = GetUrlParam("url");
            console.log("srcStr0", srcStr)
                // 按钮禁掉和灰掉
            $(".connected button").prop("disabled", true);
            $(".connected button").css("opacity", "0.5");

            var passwordIncorrect = ''
            if (passwordIncorrect == "enterWifiIncorrect") {
                $('.error').show();
            }




            $('#btn').click(function() {
                login();
            });

            //password
            // $('#pwd').keyup(function() {
            //     var reg = /^[\da-zA-Z!@#$%|+-^&*.~]{6,64}$/; //数字、字母、特殊字符
            //     $('.error').hide();
            //     if (reg.test($(this).val())) {

            //         $("#btn").removeAttr("disabled");
            //         $("#btn").css("opacity", "1");
            //     } else {

            //         $("#btn").attr("disabled", "disabled");
            //         $("#btn").css("opacity", "0.5");
            //     }
            // })
            $('#pwd').on("input", function() {
                var reg = /^[\da-zA-Z!@#$%|+-^&*.~]{8,64}$/; //数字、字母、特殊字符
                $('.error').hide();
                if (reg.test($(this).val())) {

                    $("#btn").removeAttr("disabled");
                    $("#btn").css("opacity", "1");
                } else {

                    $("#btn").attr("disabled", "disabled");
                    $("#btn").css("opacity", "0.5");
                }
            }).on('mouseup', function() {
                var reg = /^[\da-zA-Z!@#$%|+-^&*.~]{8,64}$/; //数字、字母、特殊字符
                $('.error').hide();
                if (reg.test($(this).val())) {

                    $("#btn").removeAttr("disabled");
                    $("#btn").css("opacity", "1");
                } else {
                    $("#btn").attr("disabled", "disabled");
                    $("#btn").css("opacity", "0.5");
                }
            })

            $(".SHOW").on("click", function() {
                var v = $("#pwd").get(0);
                if (v.type == "password") {
                    v.type = "text";
                    $(".SHOW").text("HIDE")
                } else {
                    v.type = "password";
                    $(".SHOW").text("SHOW")
                }
            })
        });

        $('#cancel').click(function() {
            var index = parent.layer.getFrameIndex(window.name);
            parent.layer.close(index); //关闭当前页

        });
        document.onkeydown = function(e) {
            var theEvent = window.event || e;
            var code = theEvent.keyCode || theEvent.which || theEvent.charCode;
            if (code == 13) {
                var len1 = $('input[name="password"]').val().length;
                if ((len1 >= 8 && len1 <= 64)) {
                    login();
                }

            }
        }

        function login() {
            $.ajax({
                url: "/action/login",
                type: "post",
                data: $('#loginInfo').serialize(),
                //data: "username=admin&password=123456",
                dataType: "json",
                contentType: "application/x-www-form-urlencoded;charset=utf-8",
                success: function(res) {
                    if (res.result && res.result.login == "0") {
                        $(".error").show();
                    } else {
                        $(parent.document).find("#my-iframe").attr("src", srcStr);
                        var index = parent.layer.getFrameIndex(window.name);
                        parent.layer.close(index); //关闭当前页                       
                    }
                }
            })
        }
    </script>
</body>

</html>