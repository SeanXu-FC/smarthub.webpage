<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="never">
    <!-- <meta http-equiv="refresh" content="0;"> -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/login.css" />

    <title>Raymarine</title>
    <style>
        .state1 {
            color: #aaa;
        }
        
        .state2 {
            color: #00b0ff;
        }
        
        .state3 {
            color: #EB4F38 !important;
        }
        
        .state4 {
            color: #00B694;
        }
        /* input[type="submit"] {
            width: 80px;
            height: 30px;
            font-weight: bold;
            border-radius: 15px;
            background-color: #3CbAB7;
            color: #fff;
        } */
        
        .card-body1 {
            padding: 10px;
            /* text-align: center; */
            vertical-align: middle;
        }
        
        .control-label {
            padding-top: 7px;
        }
        
        .btn:hover,
        .btn:visited {
            background-color: #861f41 !important;
            color: #fff !important;
        }
        
        .password-show {
            position: absolute;
            top: 13px;
            right: -50px;
            font-size: 12px;
            text-align: left;
            width: 40px;
            display: inline-block;
        }
        
        .go-index {
            display: inline-block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>

    <div class="container-fluid">
        <div class="top-logo">
            <div class="logo">
                <a class="go-index" href="../index.html"></a>
            </div>
        </div>
        <div class="card-wrap">
            <div class="card border-0 shadow card--login is-show" id="login">
                <div class="card-body1">
                    <h2 class="card-title"></h2>
                    <form name="details" onsubmit="return false" action="##" method="post" id="loginInfo" class="form-horizontal">
                        <div style="padding:0px 20px 20px 10px;">
                            <div style="width:300px;margin:0 auto 10px;">
                                <h3 style="margin-bottom:30px">Welcome to login Raymarine !</h3>
                                <div class="form-group">
                                    <input type="text" id="account" name="username" class="form-control" placeholder="UserName">
                                    <div id="userspan"><span></span></div>
                                </div>
                                <div class="form-group" style="margin-bottom:30px;position: relative;">
                                    <input type="password" id="pwd" name="password" class="form-control" placeholder="Password"><span class='password-show'>SHOW</span>
                                    <div id="passwordspan"><span></span></div>
                                </div>
                                <div class="text-center"><input class="btn btn-md btn-default " type="button" id="login_btn" onclick="login()" name="submit" value="login"></div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
    <script>
    </script>
    <div class="text-center" style="position: fixed;bottom:10px;color:#ccc;">Copyright ©2020 Raymarine All Rights Reserved</div>
    <script src="js/jquery.min.js"></script>
    <script src="js/login.js"></script>
    <script type="text/javascript" src="../js/common.js"></script>
    <script>
        $(function() {

                var username = false;
                var password = false;
                var repassword = false;
                var email = false;
                //username
                $('input[name="username"]').focus(function() {
                    $(this)
                        .siblings()
                        .find('span')
                        .text('User name input error, should be between 5-20 digits!')
                        .removeClass('state1 state4 state3').addClass('state2');
                    $(".state2").show();
                }).blur(function() {
                    var len = $(this).val().length;
                    if (len >= 5 && len <= 20 && $(this).val() != '') {
                        $(this).siblings()
                            .find('span')
                            .text('The user name is entered correctly!')
                            .removeClass('state1 state4 state3').addClass('state4');
                        username = true;
                        $("#login_btn").removeAttr("disabled");
                    } else {
                        $(this).siblings()
                            .find('span')
                            .text('User name input error, should be between 5-20 digits!')
                            .removeClass('state1 state2 state4')
                            .addClass('state3');
                        $("#login_btn").attr("disabled", "disabled");
                    }
                })

                //password
                $('input[name="password"]').focus(function() {
                    $(this).siblings()
                        .find('span')
                        .text('Password 6-20 characters, only contains alphanumeric underline!')
                        .removeClass()
                        .addClass('state2');
                }).blur(function() {
                    // var reg = /^[a-z | A-Z]\w{5,19}$/; //以字母开头，5-19位               
                    var reg = /^\w{6,19}$/;
                    if (reg.test($(this).val())) {
                        $(this).siblings()
                            .find('span')
                            .text('Correct password input!')
                            .removeClass()
                            .addClass('state4');
                        password = true;
                        $("#login_btn").removeAttr("disabled");
                    } else {
                        $(this).siblings()
                            .find('span')
                            .text('Password input error, please re-enter!')
                            .removeClass()
                            .addClass('state3');
                        $("#login_btn").attr("disabled", "disabled");
                    }
                })

                $(".password-show").on("click", function() {

                    var type = $("#pwd").attr("type");
                    if (type == "password") {
                        $("#pwd").attr("type", "text");
                        $(this).text("HIDE");
                    } else {
                        $("#pwd").attr("type", "password");
                        $(this).text("SHOW");
                    }
                })

                //repassword
                // $('input[name="repassword"]').focus(function() {
                //         $(this).parent()
                //             .siblings()
                //             .find('span')
                //             .text('请输入确认密码!')
                //             .removeClass()
                //             .addClass('state2');
                //     }).blur(function() {
                //         var reg = /^[a-z | A-Z]\w{5,19}$/;
                //         if (reg.test($(this).val()) && $(this).val() == $('input[name="password"]').val()) {
                //             $(this).parent()
                //                 .siblings()
                //                 .find('span')
                //                 .text('确认密码输入正确!')
                //                 .removeClass()
                //                 .addClass('state4');
                //             repassword = true;
                //         } else {
                //             $(this).parent()
                //                 .siblings()
                //                 .find('span')
                //                 .text('两次输入不一致!')
                //                 .removeClass()
                //                 .addClass('state3');
                //         }
                //     })
                //email
                // $('input[name="email"]').focus(function() {
                //     $(this).parent()
                //         .siblings()
                //         .find('span')
                //         .text('请输入正确的EMAIL格式!')
                //         .removeClass()
                //         .addClass('state2');
                // }).blur(function() {
                //     var reg = /^(\w)+(\.\w+)*@(\w)+((\.\w{2,3}){1,3})$/;
                //     if (reg.test($(this).val())) {
                //         $(this).parent()
                //             .siblings()
                //             .find('span')
                //             .text('邮箱输入正确!')
                //             .removeClass()
                //             .addClass('state4');
                //         email = true;
                //     } else {
                //         $(this).parent()
                //             .siblings()
                //             .find('span')
                //             .text('邮箱输入错误，请输入重新输入!')
                //             .removeClass()
                //             .addClass('state3');
                //     }
                // })



                //提交
                $('input[type=submit').on("click,mouseleave", function() {

                    if (username && password) {
                        $('form').submit();
                    } else {
                        return alert('You didn\'t fill it out completely or fill in the wrong format!');
                    }
                });




                // $('input[type="submit"]').click(function() {
                //     // if (username && password && repassword && email) {
                //     if (username && password) {
                //         $('form').submit();
                //     } else {
                //         return alert('You didn\'t fill it out completely or fill in the wrong format!');
                //     }
                // });



            })
            // onsubmit="return toVaild()"
        function toVaild() {
            console.log(11111)
            var name = $("#account").attr("value"); //用户名
            var pwd = $("#pwd").attr("value"); //密码
            var datas = new Object(); //返回来的结果

            console.log("name", name)
            $.ajax({
                type: "post",
                data: $('#myForm').serialize(),
                dataType: "json",
                contentType: "application/x-www-form-urlencoded;charset=UTF-8",
                url: "/action/login",
                success: function(data) {
                    console.log(data)
                    if (data.result.login == "0") {
                        $("#userspan span").hide();
                        $("#passwordspan span").text("Wrong user name or password").css("color", 'red');
                        return false;
                    } else {

                        return true;
                    }
                }
            });



        }
    </script>
    <!-- <script type="text/javascript">
        $(function() {
            $("#login_btn").click(function() {
                data1 = $("#myForm").serializeArray();
                //console.log(data1);
                var str = "";
                jQuery.ajax({
                    type: 'POST',
                    url: "/action/password",
                    dataType: "json",
                    contentType: "application/x-www-form-urlencoded;charset=UTF-8",
                    data: data1,
                    success: function(data) {
                        if (data.statusCode == "200") {
                            var pathName = window.document.location.pathname;
                            var projectName = pathName.substring(0, pathName.substr(1).indexOf('/') + 1);
                            console.log(projectName);
                            window.location.href = projectName + "/http_homeWork/" + data.referer;
                        } else if (data.statusCode == "404") {
                            // $("#loginInf").html(data.message + '<br/>');
                        }
                    },
                    error: function(data) {

                    }
                });
            });
        })
    </script> -->
</body>

</html>