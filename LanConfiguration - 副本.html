<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap/3.3.7/bootstrap.min.css">
    <script src="js/jquery/2.1.1/jquery.min.js"></script>
    <script src="js/bootstrap/3.3.7/bootstrap.min.js"></script>
    <link href="css/style.css" rel="stylesheet" />
    <script src="js/lanConfiguration.js"></script>
    <title>Document</title>
    <style>
        .btn-primary.active {
            color: #fff;
            background-color: #03387f !important;
            border-color: #03387f !important;
        }
        
        .LAN-configuration {
            font-family: OpenSans;
            font-size: 44px;
            font-weight: 600;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.36;
            letter-spacing: normal;
            text-align: left;
            color: #861f41
        }
        
        .btn1 {
            position: absolute;
            top: 0px;
            right: 80px;
        }
        
        .Path-101 {
            width: 87px;
            height: 42px;
            border: solid 1px #707070;
            background-color: #f1f1f1;
            border-radius: 5px;
        }
        
        .Path-101:hover {
            background-color: #861f41;
            color: #fff;
        }
        
        .Cancel {
            font-family: OpenSans;
            font-size: 20px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.45;
            letter-spacing: normal;
            text-align: center;
            color: #343434;
        }
        
        .Rectangle-1182:hover {
            background-color: #861f41;
            color: #fff;
        }
        
        .Rectangle-1182.active {
            background-color: #861f41;
        }
        
        .Rectangle-1182 {
            width: 87px;
            height: 42px;
            /* padding: 0 20px; */
            border-radius: 5px;
            background-color: #861f41;
            color: #fff;
        }
        
        .OK {
            font-family: OpenSans;
            font-size: 20px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.35;
            letter-spacing: normal;
            text-align: center;
            color: #ffffff;
        }
        
        .form-group div p {
            padding-top: 7px;
        }
        
        .Automatically-DHCP-on {
            font-family: OpenSans;
            font-size: 18px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.44;
            letter-spacing: normal;
            text-align: left;
            color: #3a3a3a;
        }
        
        .form-control {
            padding: 3px 10px;
        }
        
        .Configure-IP {
            font-family: OpenSans;
            font-size: 18px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.33;
            letter-spacing: normal;
            text-align: left;
            color: #3a3a3a;
        }
        
        .For-correct-operation-with-Raymarine-MFDs-ensure-that-IP-configuration-is-set-to-automatic {
            opacity: 0.74;
            font-family: OpenSans;
            font-size: 14px;
            font-weight: normal;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.43;
            letter-spacing: normal;
            text-align: left;
            color: #343434;
        }
        
        .form-horizontal .control-label {
            padding-top: 7px;
            margin-bottom: 0;
            text-align: left;
        }
        
        .DHCP-server {
            font-family: OpenSans;
            font-size: 22px;
            font-weight: 600;
            font-stretch: normal;
            font-style: normal;
            line-height: 1.36;
            letter-spacing: normal;
            text-align: left;
            color: #333333;
        }
        
        .ip_input {
            width: 38px;
            height: 32px;
            line-height: 32px;
            /* color: #000000; */
            border: 0px;
            text-align: center;
            position: relative;
            top: -3px;
        }
        
        .all_input {
            position: relative;
            width: 202px;
            width: 40%;
            /* height: 20px; */
            /* font: normal 8px 宋体; */
            /* color: #000000; */
            /* border: 1px solid #000000; */
            text-align: center;
        }
        /* .all_input span {
            width: 12px;
            height: 32px;
            position: relative;
            display: inline-block;
            border: 1px solid #f00
        } */
    </style>
</head>

<body>
    <div class="container-fluid" style="margin:30px 70px;">
        <div class="row">
            <div style="position:relative;margin-bottom:40px;border-bottom: solid 1px #ddd;padding-bottom: 10px;" class="LAN-configuration">LAN configuration

                <div class="btn1">
                    <span class="" style="display: inline-block;margin-left:148px;"><button id="cancel" class="Path-101 Cancel">Cancel</button></span>
                    <span class=" connected" style="display: inline-block;"><button id="btn" class="Rectangle-1182 active OK">Save</button></span>
                </div>
            </div>

            <form class="form-horizontal" name="formdata" id="content">
                <div class="form-group" id="ipMode">
                    <label for="" class="col-sm-4 control-label Configure-IP">Configure IP:
                        <div class="For-correct-operation-with-Raymarine-MFDs-ensure-that-IP-configuration-is-set-to-automatic">For correct operation with Raymarine MFDs ensure that IP configuration is set to automatic</div>
                    </label>

                    <div class="col-sm-8">
                        <select class="form-control width100 Automatically-DHCP-on" id="rsd">
                                <option value="Raymarine auto">Automatically (DHCP on)</option>
                                <option value="Static IP">Manually (DHCP on)</option>
                                <option value="DHCP server">Manually (DHCP off)</option>
                              </select>
                    </div>
                </div>
                <script>
                </script>
                <div id="d1">
                    <div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">IP address1:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP">192.143.1.1</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">IP address2:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP">192.143.1.1</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">IP netmask:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP">255.255.255.0</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">Gateway:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP">255.255.255.0</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <div class="col-sm-4">
                                <h4 class="DHCP-server">DHCP server settings</h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">Start IP address:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP">255.255.255.0</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">End IP address:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP">255.255.255.0</p>
                            </div>
                        </div>
                        <div class="form-group form-inline">
                            <label for="" class="col-sm-4 control-label Configure-IP">DHCP lease time:</label>
                            <div class="col-sm-8">
                                <p class="Configure-IP">120 seconds</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="d2" style="display: none;">
                    <div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">IP address1:</label>
                            <div class="col-sm-8">
                                <div class="all_input form-control width100 Configure-IP">
                                    <input name="ip1" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip1,ip2)">
                                    <span>.</span>
                                    <input name="ip2" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip2,ip3)">
                                    <span>.</span>
                                    <input name="ip3" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip2,ip3,ip4)">
                                    <span>.</span>
                                    <input id="ip4" name="ip4" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEventForIp4(ip3,ip4)">
                                    <input name="ipValue" type="hidden">

                                </div>
                                <!-- <input type="text" class="form-control width100 Configure-IP" id="InputName2" placeholder="192.143.1.1"> -->
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">IP address2:</label>
                            <div class="col-sm-8">
                                <div class="all_input form-control width100 Configure-IP">
                                    <input name="ip1" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip1,ip2)">
                                    <span>.</span>
                                    <input name="ip2" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip2,ip3)">
                                    <span>.</span>
                                    <input name="ip3" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip2,ip3,ip4)">
                                    <span>.</span>
                                    <input id="ip5" name="ip5" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEventForIp4(ip3,ip4)">
                                    <input name="ipValue" type="hidden">

                                </div>
                                <!-- <input type="text" class="form-control width100 Configure-IP" id="InputName2" placeholder="192.143.1.1"> -->
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">IP netmask:</label>
                            <div class="col-sm-8">
                                <div class="all_input form-control width100 Configure-IP">
                                    <input name="ip1" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip1,ip2)">
                                    <span>.</span>
                                    <input name="ip2" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip2,ip3)">
                                    <span>.</span>
                                    <input name="ip3" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip2,ip3,ip4)">
                                    <span>.</span>
                                    <input id="ip6" name="ip6" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEventForIp4(ip3,ip4)">
                                    <input name="ipValue" type="hidden">

                                </div>
                                <!-- <input type="text" class="form-control width100 Configure-IP" id="InputName3" placeholder="255.255.255.0"> -->
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">Gateway:</label>
                            <div class="col-sm-8">
                                <div class="all_input form-control width100 Configure-IP">
                                    <input name="ip" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip1,ip2)">
                                    <span>.</span>
                                    <input name="ip2" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip2,ip3)">
                                    <span>.</span>
                                    <input name="ip3" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip2,ip3,ip4)">
                                    <span>.</span>
                                    <input id="ip7" name="ip7" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEventForIp4(ip3,ip4)">
                                    <input name="ipValue" type="hidden">

                                </div>
                                <!-- <input type="text" class="form-control width100 Configure-IP" id="InputName3" placeholder="255.255.255.0"> -->
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <div class="col-sm-4">
                                <h4 class="DHCP-server">DHCP server settings</h4>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">Start IP address:</label>
                            <div class="col-sm-8">
                                <div class="all_input form-control width100 Configure-IP">
                                    <input name="ip1" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip1,ip2)">
                                    <span>.</span>
                                    <input name="ip2" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip2,ip3)">
                                    <span>.</span>
                                    <input name="ip3" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip2,ip3,ip4)">
                                    <span>.</span>
                                    <input id="ip8" name="ip8" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEventForIp4(ip3,ip4)">
                                    <input name="ipValue" type="hidden">

                                </div>
                                <!-- <input type="text" class="form-control width100 Configure-IP" id="InputName3" placeholder="255.255.255.0"> -->
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-sm-4 control-label Configure-IP">End IP address:</label>
                            <div class="col-sm-8">
                                <div class="all_input form-control width100 Configure-IP">
                                    <input name="ip1" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip1,ip2)">
                                    <span>.</span>
                                    <input name="ip2" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip2,ip3)">
                                    <span>.</span>
                                    <input name="ip3" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip2,ip3,ip4)">
                                    <span>.</span>
                                    <input id="ip9" name="ip9" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEventForIp4(ip3,ip4)">
                                    <input name="ipValue" type="hidden">

                                </div>
                                <!-- <input type="text" class="form-control width100 Configure-IP" id="InputName3" placeholder="255.255.255.0"> -->
                            </div>
                        </div>
                        <div class="form-group form-inline">
                            <label for="" class="col-sm-4 control-label Configure-IP">DHCP lease time:</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control width100 Configure-IP" placeholder="120"><span style="margin-left:10px;">seconds</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="d3" style="display: none;">
                    <div class="form-group">
                        <label for="" class="col-sm-4 control-label Configure-IP">IP address1:</label>
                        <div class="col-sm-8">
                            <div class="all_input form-control width100 Configure-IP">
                                <input name="ip1" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip1,ip2)">
                                <span>.</span>
                                <input name="ip2" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip2,ip3)">
                                <span>.</span>
                                <input name="ip3" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip2,ip3,ip4)">
                                <span>.</span>
                                <input id="ip10" name="ip10" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEventForIp4(ip3,ip4)">
                                <input name="ipValue" type="hidden">

                            </div>
                            <!-- <input type="text" class="form-control width100 Configure-IP" id="InputName2" placeholder="192.143.1.1"> -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-sm-4 control-label Configure-IP">IP address2:</label>
                        <div class="col-sm-8">
                            <div class="all_input form-control width100 Configure-IP">
                                <input name="ip1" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip1,ip2)">
                                <span>.</span>
                                <input name="ip2" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip2,ip3)">
                                <span>.</span>
                                <input name="ip3" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip2,ip3,ip4)">
                                <span>.</span>
                                <input id="ip11" name="ip11" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEventForIp4(ip3,ip4)">
                                <input name="ipValue" type="hidden">

                            </div>
                            <!-- <input type="text" class="form-control width100 Configure-IP" id="InputName2" placeholder="192.143.1.1"> -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-sm-4 control-label Configure-IP">IP netmask:</label>
                        <div class="col-sm-8">
                            <div class="all_input form-control width100 Configure-IP">
                                <input name="ip1" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip1,ip2)">
                                <span>.</span>
                                <input name="ip2" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip2,ip3)">
                                <span>.</span>
                                <input name="ip3" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip2,ip3,ip4)">
                                <span>.</span>
                                <input id="ip12" name="ip12" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEventForIp4(ip3,ip4)">
                                <input name="ipValue" type="hidden">

                            </div>
                            <!-- <input type="text" class="form-control width100 Configure-IP" id="" placeholder="255.255.255.0"> -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="" class="col-sm-4 control-label Configure-IP">Gateway:</label>
                        <div class="col-sm-8">
                            <div class="all_input form-control width100 Configure-IP">
                                <input name="ip1" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip1,ip2)">
                                <span>.</span>
                                <input name="ip2" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip1,ip2,ip3)">
                                <span>.</span>
                                <input name="ip3" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEvent(ip2,ip3,ip4)">
                                <span>.</span>
                                <input id="ip13" name="ip13" class="ip_input" maxlength="3" onkeydown="keyDownEvent(this)" onkeyup="keyUpEventForIp4(ip3,ip4)">
                                <input name="ipValue" type="hidden">

                            </div>
                            <!-- <input type="text" class="form-control width100 Configure-IP" id="" placeholder="255.255.255.0"> -->
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script>
        function getPos(obj) {
            obj.focus();
            var workRange = document.selection.createRange();
            obj.select();
            var allRange = document.selection.createRange();
            workRange.setEndPoint("StartToStart", allRange);
            var len = workRange.text.length;
            workRange.collapse(false);
            workRange.select();
            return len;
        }


        function setCursor(obj, num) {
            range = obj.createTextRange();
            range.collapse(true);
            range.moveStart('character', num);
            range.select();
        }

        function keyDownEvent(obj) {
            code = event.keyCode;
            if (!((code >= 48 && code <= 57) || (code >= 96 && code <= 105) || code == 190 || code == 110 || code == 13 || code == 9 || code == 39 || code == 8 || code == 46 || code == 99 || code == 37))
                event.returnValue = false;
            if (code == 13)
                event.keyCode = 9;
            if (code == 110 || code == 190)
                if (obj.value)
                    event.keyCode = 9;
                else
                    event.returnValue = false;
        }

        function keyUpEvent(obj0, obj1, obj2) {
            if (obj1.value > 255) {
                alert("填写范围必须在 0 - 255间");
                obj1.value = obj1.value.substring(0, obj1.value.length - 1);
                return;
            }
            code = event.keyCode

            if (obj1.value.length >= 3 && code != 37 && code != 39 && code != 16 && code != 9 && code != 13)
                obj2.focus();

            if (code == 32)
                obj2.focus();

            if (code == 8 && obj1.value.length == 0) {
                obj0.focus();
                setCursor(obj0, obj0.value.length);
            }

            if (code == 37 && (getPos(obj1) == 0)) {
                obj0.focus();
                setCursor(obj0, obj0.value.length);
            }
            if (code == 39 && (getPos(obj1) == obj1.value.length)) {
                obj2.focus();
            }
        }

        function keyUpEventForIp4(obj0, obj) {
            if (obj.value > 255) {
                alert("填写范围必须在 0 - 255间");
                obj.value = obj.value.substring(0, obj.value.length - 1);
                return;
            }
            if (code == 8 && obj.value.length == 0) {
                obj0.focus();
                setCursor(obj0, obj0.value.length);
            }
            if (code == 37 && (getPos(obj) == 0)) {
                obj0.focus();
                setCursor(obj0, obj0.value.length);
            }

        }

        function getIpValue(obj1, obj2, obj3, obj4, obj) {
            obj.value = obj1.value + "." + obj2.value + "." + obj3.value + "." + obj4.value;
            alert(obj.value);
        }

        //去掉前后空格
        function trim(str) {
            return str.replace(/(^\s*)|(\s*$)/g, '');
        }
        //去掉ip第一位前面的0
        function replace_ip(ip) {
            var IPArray = ip.split('.');
            for (var i = 0; i < IPArray.length; i++) {
                var num = IPArray[i];
                if (num == '000' || num == '00') {
                    IPArray[i] = 0;
                } else if (num.length > 1) {
                    IPArray[i] = num.replace(/\b(0+)/gi, ""); //正则，\b 元字符匹配单词边界。
                }
            }
            return IPArray.join('.');
        }
        //去掉数字前面0（例如00123）
        function replace_num(str) {
            var newArray = str.match(/^[0]+/); //match()返回数组或null
            if (null != newArray) {
                if ("0" != str) {
                    for (var i = 0; i < newArray[0].length; i++) {
                        str = str.replace(/^[0]{1,1}/, "");
                        if ("0" == str) {
                            return str;
                        }
                    }
                }
            }
            return str;
        }
        // var str = "0001244";
        //var ip4 = $("#ip4").val();
        // console.log(ip4.toString());
        // console.log(replace_ip(ip4))

        $('#ip4').keyup(function() {
            var ip4 = replace_num($('#ip4').val());
            $('#ip4').val(ip4);
        });

        $('#ip5').keyup(function() {
            var ip5 = replace_num($('#ip5').val());
            $('#ip5').val(ip5);
        });
        $('#ip6').keyup(function() {
            var ip5 = replace_num($('#ip6').val());
            $('#ip6').val(ip5);
        });
        $('#ip7').keyup(function() {
            var ip5 = replace_num($('#ip7').val());
            $('#ip7').val(ip5);
        });
        $('#ip8').keyup(function() {
            var ip5 = replace_num($('#ip8').val());
            $('#ip8').val(ip5);
        });
        $('#ip9').keyup(function() {
            var ip5 = replace_num($('#ip9').val());
            $('#ip9').val(ip5);
        });
        $('#ip10').keyup(function() {
            var ip5 = replace_num($('#ip10').val());
            $('#ip10').val(ip5);
        });
        $('#ip11').keyup(function() {
            var ip5 = replace_num($('#ip11').val());
            $('#ip11').val(ip5);
        });
        $('#ip12').keyup(function() {
            var ip5 = replace_num($('#ip12').val());
            $('#ip12').val(ip5);
        });
        $('#ip13').keyup(function() {
            var ip5 = replace_num($('#ip13').val());
            $('#ip13').val(ip5);
        });
    </script>
</body>

</html>