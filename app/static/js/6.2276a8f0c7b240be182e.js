webpackJsonp([6],{BYqz:function(t,s,e){"use strict";(function(t){e("Xrj1");var a=e("1nur"),r=e("nEPM"),i=e.n(r),n=e("nBqZ");e("VTEy");e("7+uW").a.use(a.a),s.a={name:"SoftwareUpgrade",data:function(){return{tanhao:i.a,upDisable:!0,applicationVersion:"--",platformVersion:"--",bundleVersion:"--",percent:0,progressDis:!1}},mounted:function(){this.getVersion()},methods:{getVersion:function(){var t=this;this.toast=this.utils.ToastMsg(2),Object(n.b)("GetHubInfo",{}).then(function(s){t.toast.clear(),s.result?t.applicationVersion=s.result.TotalVersion:s.error&&t.utils.ToastMsg(0,2e3,s.error.message)}).catch(function(s){t.toast.clear(),t.utils.DialogErr(s)})},handleFileChange:function(t){var s=this,e=this.$refs.inputer.files[0],a=new FormData;a.append("file",e),console.log(e),a.append("mode","0"),console.log(a);var r=new XMLHttpRequest;r.upload.onerror=function(){console.log("Upload fail！")},r.upload.onload=function(){console.log("上传成功")},s.progressDis=!0,r.upload.onprogress=function(t){var e=Math.floor(100*t.loaded/t.total);s.percent=Number(e)},r.open("post","/action/upload",!0),r.send(a),r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status){var t=JSON.parse(r.response);0==t.code&&(s.upDisable=!1)}else s.utils.DialogErr("Upload fail！")}},toAgrade:function(){var s=this;t.ajax({url:"/action/upload",type:"post",data:"mode=1",dataType:"json",contentType:"application/x-www-form-urlencoded;charset=utf-8",success:function(t){console.log(t),100==t.code&&s.$router.push({path:"/Upgrading",query:{status:null,steps:null}})}})}}}}).call(s,e("7t+N"))},DBqB:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("BYqz"),r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"RestartReset"},[e("div",{staticClass:"Restart-describe -flex-display -align-box"},[e("img",{attrs:{src:t.tanhao}}),t._v(" "),e("span",{staticClass:"Restart-title -ml10"},[t._v("SmartHub software requires an update")])]),t._v(" "),e("div",{staticClass:"Restart-describe -pt20 -mt10"},[e("span",{staticClass:"Restart-describe width170"},[t._v("Application version:")]),e("span",{staticClass:"Restart-describe"},[t._v(t._s(t.applicationVersion))])]),t._v(" "),e("div",{staticClass:"Restart-describe"},[e("span",{staticClass:"Restart-describe width170"},[t._v("Platform version:")]),e("span",{staticClass:"Restart-describe"},[t._v(t._s(t.platformVersion))])]),t._v(" "),e("div",{staticClass:"Restart-describe"},[e("span",{staticClass:"Restart-describe width170"},[t._v("Product bundle version:")]),e("span",{staticClass:"Restart-describe"},[t._v(t._s(t.bundleVersion))])]),t._v(" "),e("div",{staticClass:"file-c -mt30"},[e("label",{staticClass:"file-label",attrs:{for:"fileinp"}},[e("span",{staticClass:"file-choose"},[t._v("Browse file to upload")]),t._v(" "),e("input",{ref:"inputer",attrs:{type:"file",id:"fileinp"},on:{change:t.handleFileChange}})])]),t._v(" "),t.progressDis?e("div",{staticClass:"-mt10"},[e("van-progress",{attrs:{percentage:t.percent}})],1):t._e(),t._v(" "),e("button",{staticClass:"btn-c",class:t.upDisable?"disable-btn":"",attrs:{disabled:t.upDisable},on:{click:function(s){return s.target!==s.currentTarget?null:t.toAgrade(s)}}},[t._v("\n    Upgrade\n  ")])])},staticRenderFns:[]};var i=function(t){e("fjiI")},n=e("VU/8")(a.a,r,!1,i,"data-v-4106cf90",null);s.default=n.exports},fjiI:function(t,s){},nEPM:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIRSURBVFhH7Va7SsRAFLWwsLQQtLS3sLD1DywtLP0ICws/wsLCYpUFRbBRBBtFUWQLRexE8VHYiA8sRJfdZJNNxjk3mWySvXlMorjFHjgMkzP3zmE2ZzYDogfQN6FQyITbNoR5PCua1SEaMS+DQiasqyXRrAyI5pqkHDEvA20TzvcTnQAZUJRzPC8KbROtk7nOKSjKOZ4XhZYJ57UmGnEDIUIvAi0Txt4Uu7ki9CLIbcK+r3Y23BoTrbP5gJgrDet0kcuEa37KjUaDjcz9aV/xgLnSsM616r6SD7lMWJeLkXfB2B73FQ+YKw3rsF4HmSacr8fuSG6O+KoHzCM6Iivr8iLTBN2MTCLCiGtYj7q8SDXRfjlNjKRrfNAajJyOOtTnQbIJxxbG7iS7AejWvRsSI6eDqEefLCSasO8q7M+g6Lyf0zrnrcbqRFmPPllgTVAk5cvW4Br7dPyjbj8fsTpI9Yis7JcG1oR1sZB6CqD94F1KGDk9oOyTFdkuExTJ9UG+YYhojNPAyOkRyn5pke0yYR7O8I1KEn2TEDGB3zftX7IMKbKyP4eOCURyZ4JtwNG+XaUa+2aF1TmiPxfZwASaZr2MYQaQ35eczlL2J/MxUDeK5MYwX5hAyr/mSRBl9OORJRP29bLWKZQiTkPuF0ZgIu1i+k1iH9YEPkLMg7+JZpzYJ/7RE3rD/g99Ewo9YEKIHwCxXUuqtfT5AAAAAElFTkSuQmCC"}});