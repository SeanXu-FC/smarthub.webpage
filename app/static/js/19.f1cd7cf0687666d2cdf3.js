webpackJsonp([19],{PTmU:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=e("mvHQ"),l=e.n(n),o=(e("cZ0s"),e("fIxc")),c=(e("3gWi"),e("ZxCb")),i=e("nBqZ"),S=e("7+uW");S.a.use(c.a),S.a.use(o.a);var r={name:"Gnss",data:function(){return{toast:null,auth_token:"",ipaddr:"",RoamingSwitch:!0,Glonass:!1,beidou:!1,GPS:!1,SBAS:!1,GALILEO:!1,IMES:!1,QZSS:!1,DifferentSwitch:!1,ALCOMSAT:!1,Aus_nz:!1,Bdsbas:!1,Egnos:!1,Gagan:!1,Kaas:!1,MSAS:!1,NSAS:!1,SDCM:!1,WAAS:!1,QZSSModel:!1}},mounted:function(){this.getGnss()},methods:{getGnss:function(){var s=this;this.toast=this.utils.ToastMsg(2),Object(i.b)("GetGnssAuthToken",{}).then(function(t){s.toast.clear(),t.result&&t.result.auth_token&&t.result.ipaddr?s.connectWebsocket(t.result.auth_token,t.result.ipaddr):t.error&&s.utils.ToastMsg(0,2e3,t.error.message)}).catch(function(t){s.toast.clear(),s.utils.DialogErr("Error message","Communication exception, please try again later!")})},connectWebsocket:function(s,t){var e=this,n=("https"==document.location.protocol?"wss://":"ws://")+"["+t+"]:7778";(a=this.new_ws(n)).onopen=function(){console.log("连接已打开...");var t={request:"authenticate",token:s};t=l()(t),e.sendmsg(t)},a.onmessage=function(s){var t=JSON.parse(s.data);if(console.log(t),"authenticate"==t.responseTo&&e.getGnssData(),"resetGnss"==t.responseTo&&1==t.state&&e.utils.ToastMsg(0,2e3,"Reset GNSS successfully!"),"getGnss"==t.responseTo&&t.gnss){if(t.gnss.EnableSBAS&&(e.DifferentSwitch=!0),t.gnss.EnableConstellations&&t.gnss.EnableConstellations.length)for(var a=0;a<t.gnss.EnableConstellations.length;a++)"GLONASS"==t.gnss.EnableConstellations[a]&&(e.Glonass=!0),"BEIDOU"==t.gnss.EnableConstellations[a]&&(e.beidou=!0),"GPS"==t.gnss.EnableConstellations[a]&&(e.GPS=!0),"SBAS"==t.gnss.EnableConstellations[a]&&(e.SBAS=!0),"GALILEO"==t.gnss.EnableConstellations[a]&&(e.GALILEO=!0),"IMES"==t.gnss.EnableConstellations[a]&&(e.IMES=!0),"QZSS"==t.gnss.EnableConstellations[a]&&(e.QZSS=!0);if(t.gnss.EnableSBASSats&&t.gnss.EnableSBASSats.length)for(var n=0;n<t.gnss.EnableSBASSats.length;n++)"ALCOMSAT"==t.gnss.EnableSBASSats[n]&&(e.ALCOMSAT=!0),"AUSNZ"==t.gnss.EnableSBASSats[n]&&(e.Aus_nz=!0),"BDSBAS"==t.gnss.EnableSBASSats[n]&&(e.Bdsbas=!0),"EGNOS"==t.gnss.EnableSBASSats[n]&&(e.Egnos=!0),"GAGAN"==t.gnss.EnableSBASSats[n]&&(e.Gagan=!0),"KASS"==t.gnss.EnableSBASSats[n]&&(e.Kaas=!0),"MSAS"==t.gnss.EnableSBASSats[n]&&(e.MSAS=!0),"NSAS"==t.gnss.EnableSBASSats[n]&&(e.NSAS=!0),"SDCM"==t.gnss.EnableSBASSats[n]&&(e.SDCM=!0),"WAAS"==t.gnss.EnableSBASSats[n]&&(e.WAAS=!0),"QZSS"==t.gnss.EnableSBASSats[n]&&(e.QZSSModel=!0);else t.gnss&&t.gnss.error&&e.utils.ToastMsg(0,2e3,t.gnss.error)}"setGnss"==t.responseTo&&1==t.state&&e.utils.ToastMsg(0,2e3,"Saved successfully!")},a.onclose=function(){e.utils.ToastMsg(0,2e3,"Connection closed ...")},a.onerror=function(s){e.utils.ToastMsg(0,2e3,"Connection error ..."+l()(s))}},new_ws:function(s){return new WebSocket(s)},sendmsg:function(s){a.send(s)},stop:function(){this.utils.ToastMsg("Connection closed ..."),a.close()},getGnssData:function(){var s={request:"getGnss"};s=l()(s),a.send(s)},getSaveVal:function(){var s=this.DifferentSwitch,t=[];this.Glonass&&t.push("GLONASS"),this.beidou&&t.push("BEIDOU"),this.GPS&&t.push("GPS"),this.SBAS&&t.push("SBAS"),this.GALILEO&&t.push("GALILEO"),this.IMES&&t.push("IMES"),this.QZSS&&t.push("QZSS");var e=[];this.ALCOMSAT&&e.push("ALCOMSAT"),this.Aus_nz&&e.push("AUSNZ"),this.Bdsbas&&e.push("BDSBAS"),this.Egnos&&e.push("EGNOS"),this.Gagan&&e.push("GAGAN"),this.Kaas&&e.push("KASS"),this.MSAS&&e.push("MSAS"),this.NSAS&&e.push("NSAS"),this.SDCM&&e.push("SDCM"),this.WAAS&&e.push("WAAS"),this.QZSSModel&&e.push("QZSS");var a={request:"setGnss",config:{EnableSBAS:s,EnableSBASSats:e,EnableConstellations:t}};this.saveGNSS(a)},saveGNSS:function(s){s=l()(s),a.send(s)},ResetGNSS:function(){var s={request:"resetGnss"};s=l()(s),a.send(s)}}},v={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[e("div",{staticClass:"Gnss"},[s._m(0),s._v(" "),e("div",{staticClass:"Wireless-c -mt20 -flex-display -justify-box -align-box "},[e("span",{staticClass:"Wireless-l"},[s._v("Internal GNSS:")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.RoamingSwitch,callback:function(t){s.RoamingSwitch=t},expression:"RoamingSwitch"}})],1),s._v(" "),e("div",{staticClass:"Setup-describe"},[s._v("\n      Disable if you do not want to use the router's internal GNSS receiver as\n      a source for positioning data\n    ")]),s._v(" "),e("button",{staticClass:"PIN-btn",on:{click:s.ResetGNSS}},[s._v("Restart GNSS")]),s._v(" "),s._m(1),s._v(" "),e("div",{staticClass:"Wireless-c "},[e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.Glonass,callback:function(t){s.Glonass=t},expression:"Glonass"}},[s._v("GLONASS")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.beidou,callback:function(t){s.beidou=t},expression:"beidou"}},[s._v("BEIDOU")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.GPS,callback:function(t){s.GPS=t},expression:"GPS"}},[s._v("GPS")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.SBAS,callback:function(t){s.SBAS=t},expression:"SBAS"}},[s._v("SBAS")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.GALILEO,callback:function(t){s.GALILEO=t},expression:"GALILEO"}},[s._v("GALILEO")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.IMES,callback:function(t){s.IMES=t},expression:"IMES"}},[s._v("IMES")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.QZSS,callback:function(t){s.QZSS=t},expression:"QZSS"}},[s._v("QZSS")])],1),s._v(" "),e("div",{staticClass:"Wireless-c -mt20 -flex-display -justify-box -align-box "},[e("span",{staticClass:"Wireless-l"},[s._v("Differential positioning:")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.DifferentSwitch,callback:function(t){s.DifferentSwitch=t},expression:"DifferentSwitch"}})],1),s._v(" "),e("div",{staticClass:"Setup-describe"},[s._v("\n      Activating differential positioning provides more accurate positioning\n      in regions covered by Satellite Based Augmentation Systems (SBAS)\n    ")]),s._v(" "),e("div",{staticClass:"Setup-title"},[s._v("\n      Differential positioning systems:\n    ")]),s._v(" "),e("div",{staticClass:"auto-checked -mt20"},[e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.ALCOMSAT,callback:function(t){s.ALCOMSAT=t},expression:"ALCOMSAT"}},[s._v("ALCOMSAT (Algeria)")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.Aus_nz,callback:function(t){s.Aus_nz=t},expression:"Aus_nz"}},[s._v("AUS-NZ (Australia New Zealand)")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.Bdsbas,callback:function(t){s.Bdsbas=t},expression:"Bdsbas"}},[s._v("BDSBAS (China)")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.Egnos,callback:function(t){s.Egnos=t},expression:"Egnos"}},[s._v("EGNOS (Europe)")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.Gagan,callback:function(t){s.Gagan=t},expression:"Gagan"}},[s._v("GAGAN (Indian)")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.Kaas,callback:function(t){s.Kaas=t},expression:"Kaas"}},[s._v("KAAS (Korea)")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.MSAS,callback:function(t){s.MSAS=t},expression:"MSAS"}},[s._v("MSAS")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.NSAS,callback:function(t){s.NSAS=t},expression:"NSAS"}},[s._v("NSAS")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.SDCM,callback:function(t){s.SDCM=t},expression:"SDCM"}},[s._v("SDCM")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.WAAS,callback:function(t){s.WAAS=t},expression:"WAAS"}},[s._v("WAAS")]),s._v(" "),e("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:s.QZSSModel,callback:function(t){s.QZSSModel=t},expression:"QZSSModel"}},[s._v("QZSS")])],1),s._v(" "),e("div",{staticClass:"Setup-title"},[s._v("\n      Satellites in use:\n    ")]),s._v(" "),s._m(2)]),s._v(" "),e("div",{staticClass:"Setup-btn -flex-display"},[e("button",{staticClass:"btn cancle"},[s._v("Cancel")]),s._v(" "),e("button",{staticClass:"btn ok",attrs:{id:"APOk"},on:{click:s.getSaveVal}},[s._v("\n      Save\n    ")])])])},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"Wireless-c -flex-display -justify-box -align-box"},[t("span",{staticClass:"Wireless-l"},[this._v("GNSS Fix status:")]),this._v(" "),t("span",{staticClass:"result-tip"},[this._v("Fix")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"Wireless-c"},[t("p",{staticClass:"Setup-title"},[this._v("GNSS Constellations:")]),this._v(" "),t("p",{staticClass:"Setup-describe -mt10"},[this._v("\n        Select which other satellite constellations are used to determine\n        position, in addition to the GPS system\n      ")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"Satellites-c"},[e("table",{staticClass:"table"},[e("tr",{staticClass:"bor-b"},[e("th",{staticClass:"th"},[s._v("Satellite ID/PRN")]),s._v(" "),e("th",{staticClass:"th"},[s._v("Constell.")]),s._v(" "),e("th",{staticClass:"th"},[s._v("Used in fix flag")]),s._v(" "),e("th",{staticClass:"th"},[s._v("HDOP")]),s._v(" "),e("th",{staticClass:"th"},[s._v("Azimuth")])]),s._v(" "),e("tr",[e("td",{staticClass:"td"},[s._v("40")]),s._v(" "),e("td",{staticClass:"td"},[s._v("GLONASS")]),s._v(" "),e("td",{staticClass:"td"},[s._v("Yes")]),s._v(" "),e("td",{staticClass:"td"},[s._v("1.2")]),s._v(" "),e("td",{staticClass:"td"},[s._v("137.3 SE")])]),s._v(" "),e("tr",[e("td",{staticClass:"td"},[s._v("41")]),s._v(" "),e("td",{staticClass:"td"},[s._v("GLONASS")]),s._v(" "),e("td",{staticClass:"td"},[s._v("Yes")]),s._v(" "),e("td",{staticClass:"td"},[s._v("1.2")]),s._v(" "),e("td",{staticClass:"td"},[s._v("137.3 SE")])]),s._v(" "),e("tr",[e("td",{staticClass:"td"},[s._v("50")]),s._v(" "),e("td",{staticClass:"td"},[s._v("GLONASS")]),s._v(" "),e("td",{staticClass:"td"},[s._v("Yes")]),s._v(" "),e("td",{staticClass:"td"},[s._v("1.2")]),s._v(" "),e("td",{staticClass:"td"},[s._v("137.3 SE")])]),s._v(" "),e("tr",[e("td",{staticClass:"td"},[s._v("62")]),s._v(" "),e("td",{staticClass:"td"},[s._v("GLONASS")]),s._v(" "),e("td",{staticClass:"td"},[s._v("Yes")]),s._v(" "),e("td",{staticClass:"td"},[s._v("1.2")]),s._v(" "),e("td",{staticClass:"td"},[s._v("137.3 SE")])])])])}]};var u=e("VU/8")(r,v,!1,function(s){e("RgBM")},"data-v-620b37e2",null);t.default=u.exports},RgBM:function(s,t){}});