webpackJsonp([17],{C3RE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("cZ0s");var i=a("fIxc"),n=(a("3gWi"),a("ZxCb")),s=a("nBqZ"),l=a("VTEy"),o=a("7+uW");o.a.use(n.a),o.a.use(i.a);var r={name:"ChannelConfiguration",components:{prompt:l.a},data:function(){return{toast:null,ChannelArr:[],ChannelName:"",EditPrompt:!1,alertId:null,EditChannel:{},channelSelected:0,voltType:0,voltVal:0,notifyVal:"",characters:256,notifySwitch:!0,Wake_fun:!0,dataId:0}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.toast=this.utils.ToastMsg(2),Object(s.b)("IoConfigure",{mode:"0"}).then(function(e){if(t.toast.clear(),e.result&&e.result.io_date){for(var a=e.result.io_date,i=(parseInt(a.length/2),[]),n=0;n<4;n++)1==a[n].types?a[n].Switch=!0:0==a[n].types&&(a[n].Switch=!1),i.push(a[n]);t.ChannelArr=i,console.log(t.ChannelArr)}else e.error&&t.utils.ToastMsg(0,2e3,e.error.message)}).catch(function(e){t.toast.clear(),t.utils.DialogErr("Error message","Communication exception, please try again later!")})},bindEditChannel:function(t){this.dataId=t.id,this.EditChannel=t,this.notifySwitch=1==t.notification,this.channelSelected=t.trig_cond_type,this.voltVal=t.volt,this.notifyVal=t.noti_msg,this.WidthCheckIO(256),this.EditPrompt=!0,this.alertId=t.alter_id,this.voltType=t.types},EditOk:function(){var t=this,e={mode:3,id:Number(t.dataId),notification:1==t.notifySwitch?1:0,trig_cond_type:Number(t.channelSelected),trig_cond_value:Number(t.voltVal).toFixed(1),noti_msg:t.notifyVal,alter_id:Number(this.alertId)};Object(s.b)("IoConfigure",e).then(function(e){e.result?(t.getData(),t.EditPrompt=!1):e.error&&t.utils.ToastMsg(0,2e3,e.error.message)}).catch(function(e){t.utils.DialogErr("Error message","Communication exception, please try again later!")})},EditCancel:function(){this.EditPrompt=!1},toDecimal:function(t,e){var a=(Math.round(t*Math.pow(10,e))/Math.pow(10,e)).toString();a.indexOf(".")<0&&(a+=".");for(var i=a.length-a.indexOf(".");i<=e;i++)a+="0";return a},WidthCheckIO:function(t){var e=0;if(this.notifyVal=this.notifyVal.replace(/[^\x00-\xff]+/g,""),this.notifyVal=this.notifyVal.replace(/(^\s*)/g,""),this.notifyVal)for(var a=0;a<this.notifyVal.length;a++){var i=this.notifyVal.charCodeAt(a);if(i>=1&&i<=126||65376<=i&&i<=65439?e++:e+=2,this.characters=t-e,e>t){this.notifyVal=this.notifyVal.substr(0,a);break}}else this.characters=t}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Channel"},[a("div",{staticClass:"Channel-content -mt20"},t._l(t.ChannelArr,function(e){return a("div",{key:e.id},[a("div",{staticClass:"Channel-item"},[a("div",{staticClass:"Channel-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"Channel-num"},[t._v("Channel "+t._s(e.id))]),t._v(" "),a("div",{staticClass:"Channel-flag",class:1==e.notification?"enabled-c":""},[t._v("\n          "+t._s(1==e.notification?"Notifications enabled":"Notifications disabled")+"\n        ")]),t._v(" "),a("div",{staticClass:"Channel-switch",on:{click:function(a){return t.bindEditChannel(e)}}},[t._v("\n          Edit\n        ")])])])}),0),t._v(" "),a("prompt",{directives:[{name:"show",rawName:"v-show",value:t.EditPrompt,expression:"EditPrompt"}]},[a("div",{staticClass:"prompt-c",attrs:{slot:"promtHtml"},slot:"promtHtml"},[a("p",{staticClass:"prompt-t"},[t._v(t._s(t.EditChannel.name))]),t._v(" "),a("div",{staticClass:"prompt-row -flex-display -align-box -justify-box -mt25"},[a("label",{staticClass:"prompt-label"},[t._v("Alert ID:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.alertId,expression:"alertId"}],staticClass:"prompt-input",attrs:{type:"text"},domProps:{value:t.alertId},on:{input:function(e){e.target.composing||(t.alertId=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"prompt-subscribe"},[t._v("\n        Alert ID must be between 1000 and 65000 and must be individual to\n        other input alert ID's\n      ")]),t._v(" "),a("div",{staticClass:"prompt-row -flex-display -mt25"},[a("label",{staticClass:"prompt-label"},[t._v("Allow notifications:")]),t._v(" "),a("div",{staticClass:"prompt-inp-check"},[a("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:t.notifySwitch,callback:function(e){t.notifySwitch=e},expression:"notifySwitch"}})],1)]),t._v(" "),a("div",{staticClass:"prompt-row -mt10"},[a("label",{staticClass:"prompt-label"},[t._v("Notify when:")]),t._v(" "),a("div",{staticClass:"prompt-sub -pt10"},[t._v("Channel has a")]),t._v(" "),a("div",{staticClass:"prompt-inp-c"},[0==t.voltType?a("select",{directives:[{name:"model",rawName:"v-model",value:t.channelSelected,expression:"channelSelected"}],staticClass:"prompt-select",attrs:{id:"security",disabled:1!=t.notifySwitch},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.channelSelected=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[t._v("Value below")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("Value above")])]):a("select",{directives:[{name:"model",rawName:"v-model",value:t.channelSelected,expression:"channelSelected"}],staticClass:"prompt-select",attrs:{id:"security",disabled:1!=t.notifySwitch},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.channelSelected=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[t._v("Met")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("not met")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.voltVal,expression:"voltVal"}],staticClass:"prompt-input",attrs:{type:"text",id:"new_wifi_p",disabled:1!=t.notifySwitch},domProps:{value:t.voltVal},on:{input:function(e){e.target.composing||(t.voltVal=e.target.value)}}}),t._v(" "),a("label",{staticClass:"prompt-label"},[t._v("volts")])])]),t._v(" "),a("div",{staticClass:"prompt-row"},[a("label",{staticClass:"prompt-label"},[t._v("Notification message:")]),t._v(" "),a("div",{staticClass:"prompt-inp-c"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.notifyVal,expression:"notifyVal"}],staticClass:"prompt-textarea -mt10",attrs:{type:"text",id:"new_wifi_p",disabled:1!=t.notifySwitch},domProps:{value:t.notifyVal},on:{input:[function(e){e.target.composing||(t.notifyVal=e.target.value)},function(e){return t.WidthCheckIO(256)}]}}),t._v(" "),a("p",{staticClass:"characters-left"},[t._v(t._s(t.characters)+" characters left")])])]),t._v(" "),a("div",{staticClass:"prompt-btn -mt20"},[a("button",{staticClass:"prompt-cancel",on:{click:function(e){return e.stopPropagation(),t.EditCancel(e)}}},[t._v("\n          Cancel\n        ")]),t._v(" "),a("button",{staticClass:"prompt-ok -ml10",attrs:{id:"newWifiOk"},on:{click:function(e){return e.stopPropagation(),t.EditOk(e)}}},[t._v("\n          Save\n        ")])])])])],1)},staticRenderFns:[]};var p=a("VU/8")(r,c,!1,function(t){a("GNT6")},"data-v-4c60fc48",null);e.default=p.exports},GNT6:function(t,e){}});