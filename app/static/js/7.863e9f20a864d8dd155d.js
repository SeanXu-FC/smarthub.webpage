webpackJsonp([7],{"6AV7":function(s,t){},QdSr:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});e("XmAh");var i=e("il3B"),r=(e("UuFX"),e("J1XP")),A=(e("eqfM"),e("/QYm")),a=(e("Xrj1"),e("1nur")),n=e("nBqZ"),o=e("zjIY"),u=e.n(o),p=(e("8+FI"),e("mtWM"),e("7+uW"));p.a.use(a.a),p.a.use(A.a),p.a.use(r.a);var h=null,m=null,l={name:"Upgrading",data:function(){return{frequency:0,toast:null,percent:"0",progressS:!0,progressTip:"Upgrading software...",progresSteps:"Starting to upgrade",nowStatus:null,progressColor:"#861f41",count:0,total:100,type:0,showPivot:!1,stepsFail:!1,timeRemainingStatus:0,remainTime:0,remainTimeTip:"Please restart manually",progressTimeS:!1,progressLoading:u.a,maskShow:!0}},beforeDestroy:function(){clearInterval(h),clearInterval(m)},mounted:function(){if(this.nowStatus=this.$route.query.status,this.progresSteps=this.$route.query.steps,this.count=this.$route.query.count,this.total=this.$route.query.total,"null"!=this.nowStatus&&null!=this.nowStatus){var s={status:this.nowStatus,steps:this.progresSteps,count:this.count,total:this.total};this.statusHandle(s)}else this.no4Getstatus();this.percent="0",this.maskShow=!0},methods:{progress:function(s,t){void 0!=s&&void 0!=t&&(this.percent=parseInt(s/t*100),this.percent>100&&(this.percent=100))},no4Getstatus:function(){var s=this;h=setInterval(function(){Object(n.b)("GetUpgradeStatusAndProgress",{status:0},8e3).then(function(t){t.result?(s.progress(t.result.count,t.result.total),s.statusHandle(t.result)):t.error&&s.utils.ToastMsg(0,2e3,t.error.message)}).catch(function(s){console.log(s)})},2e3)},statusHandle:function(s){"1"==s.status?(this.maskShow=!1,this.timeRemainingStatus=s.status,this.progressTimeS=!1,this.progress(100,100),this.StateResponse(1),this.progresSteps=s.steps,clearInterval(h),this.PromptSuccess(s.steps)):"0"==s.status?(this.maskShow=!1,this.timeRemainingStatus=s.status,this.progressTimeS=!1,clearInterval(h),this.StateResponse(1),this.progresSteps=s.steps,this.stepsFail=!0,this.Promptfail(s.steps)):"2"==s.status?(this.timeRemainingStatus=s.status,this.progressTimeS=!1,this.progresSteps=s.steps,clearInterval(h),this.no4Getstatus()):"3"==s.status?(this.maskShow=!1,this.timeRemainingStatus=s.status,this.progressTimeS=!1,this.progresSteps=s.steps,this.progressS=!1,clearInterval(h)):"4"==s.status?(this.progressTimeS=!0,4==this.timeRemainingStatus&&(this.remainTimeTip="(Please restart manually)"),this.timeRemainingStatus=s.status,this.StateResponse(1),this.progresSteps=s.steps,this.timerOut(6e4,this.no4Getstatus)):"5"==s.status?(this.progressTimeS=!0,5==this.timeRemainingStatus&&(this.remainTimeTip="(Please restart manually)"),this.timeRemainingStatus=s.status,this.StateResponse(1),this.progresSteps=s.steps,this.timerOut(6e4,this.no4Getstatus)):"6"==s.status&&(this.timeRemainingStatus=s.status,this.StateResponse(1),this.progresSteps=s.steps,this.timerOut(3e5,this.no4Getstatus))},StateResponse:function(){Object(n.b)("GetUpgradeStatusAndProgress",{status:1}).then(function(s){}).catch(function(s){})},PromptSuccess:function(s){var t=this;i.a.alert({title:"Success message",message:s}).then(function(){t.$router.push({path:"/Home"})})},Promptfail:function(s){var t=this;i.a.alert({title:"Fail message",message:s}).then(function(){t.$router.push({path:"/SoftwareUpgrade"})})},timerOut:function(s,t){var e=this;clearInterval(h),setTimeout(function(){t()},s),e.remainTime=s/1e3,m=setInterval(function(){e.remainTime--,console.log("remainTime",e.remainTime),e.remainTime<1?(e.remainTime=0,clearInterval(m),e.progressTimeS=!1):e.remainTimeTip="("+e.remainTime+" seconds remaining)"},1e3)}}},g={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"Upgrading"},[e("div",{staticClass:"Upgrade-title"},[s._v("\n    "+s._s(s.progresSteps)+"\n    "),e("img",{directives:[{name:"show",rawName:"v-show",value:s.progressS,expression:"progressS"}],staticClass:"gif-img",attrs:{src:s.progressLoading}})]),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:s.progressS,expression:"progressS"}],staticClass:"progress-c"},[e("van-progress",{attrs:{percentage:s.percent,"stroke-width":"22",color:s.progressColor,"show-pivot":s.showPivot}}),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:s.progressTimeS,expression:"progressTimeS"}],staticClass:"progress-time"},[s._v("\n      "+s._s(s.remainTimeTip)+"\n    ")])],1),s._v(" "),e("van-overlay",{attrs:{show:s.maskShow,"z-index":"999","lock-scroll":s.lockScroll}})],1)},staticRenderFns:[]};var c=e("VU/8")(l,g,!1,function(s){e("ysKr"),e("6AV7")},"data-v-281e5e04",null);t.default=c.exports},ysKr:function(s,t){},zjIY:function(s,t){s.exports="data:image/gif;base64,R0lGODlhgAAPAKIAALCvsMPCwz8/PwAAAPv6+wAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQECgAAACwAAAAAgAAPAAAD50ixS/6sPRfDpPGqfKv2HTeBowiZGLORq1lJqfuW7Gud9YzLud3zQNVOGCO2jDZaEHZk+nRFJ7R5i1apSuQ0OZT+nleuNetdhrfob1kLXrvPariZLGfPuz66Hr8f8/9+gVh4YoOChYhpd4eKdgwAkJEAE5KRlJWTD5iZDpuXlZ+SoZaamKOQp5wEm56loK6isKSdprKotqqttK+7sb2zq6y8wcO6xL7HwMbLtb+3zrnNycKp1bjW0NjT0cXSzMLK3uLd5Mjf5uPo5eDa5+Hrz9vt6e/qosO/GvjJ+sj5F/sC+uMHcCCoBAAh+QQECgAAACwAAAAABwAPAAADEUiyq/wwyknjuDjrzfsmGpEAACH5BAQKAAAALAsAAAAHAA8AAAMRSLKr/DDKSeO4OOvN+yYakQAAIfkEBAoAAAAsFgAAAAcADwAAAxFIsqv8MMpJ47g46837JhqRAAAh+QQECgAAACwhAAAABwAPAAADEUiyq/wwyknjuDjrzfsmGpEAACH5BAQKAAAALCwAAAAHAA8AAAMRSLKr/DDKSeO4OOvN+yYakQAAIfkEBAoAAAAsNwAAAAcADwAAAxFIsqv8MMpJ47g46837JhqRAAAh+QQECgAAACxCAAAABwAPAAADEUiyq/wwyknjuDjrzfsmGpEAACH5BAQKAAAALE0AAAAHAA8AAAMRSLKr/DDKSeO4OOvN+yYakQAAIfkEBAoAAAAsWAAAAAcADwAAAxFIsqv8MMpJ47g46837JhqRAAAh+QQECgAAACxjAAAABwAPAAADEUiyq/wwyknjuDjrzfsmGpEAACH5BAQKAAAALG4AAAAHAA8AAAMRSLKr/DDKSeO4OOvN+yYakQAAIfkEBAoAAAAseQAAAAcADwAAAxFIsqv8MMpJ47g46837JhqRAAA7"}});