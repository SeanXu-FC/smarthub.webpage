webpackJsonp([17],{DQAx:function(t,e){},FY22:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("cZ0s");var n=a("fIxc"),i=(a("3gWi"),a("ZxCb")),s=a("nBqZ"),l=a("XS/3"),o=a("7+uW");o.a.use(i.a),o.a.use(n.a);var r={name:"ChannelConfiguration",components:{prompt:l.a},data:function(){return{toast:null,ChannelArr:[],ChannelName:"",voltTypeSelect:"",EditPrompt:!1,EditChannel:{},EnableIo:!1}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.toast=this.utils.ToastMsg(2),Object(s.b)("IoConfigure",{mode:"0"}).then(function(e){if(t.toast.clear(),e.result&&e.result.io_date){for(var a=e.result.io_date,n=0;n<a.length;n++)n<4&&(1==a[n].status?0==a[n].types?a[n].voltType="Analog input":2==a[n].types?a[n].voltType="Digital negative input":a[n].voltType="Digital postive input":a[n].voltType="DISABLED");t.ChannelArr=a}else e.error&&t.utils.ToastMsg(0,2e3,e.error.message)}).catch(function(e){t.toast.clear(),t.utils.DialogErr("Error message","Communication exception, please try again later!")})},bindEditChannel:function(t){this.EditPrompt=!0,this.EditChannel=t,this.ChannelName=t.name,this.voltTypeSelect=t.types,1==t.status?this.EnableIo=!0:this.EnableIo=!1},EditOk:function(){var t=this,e={};e=Number(t.EditChannel.id)<5?{mode:2,id:Number(t.EditChannel.id),name:t.ChannelName,types:Number(t.voltTypeSelect),status:this.EnableIo?1:0}:{mode:2,id:Number(t.EditChannel.id),name:t.ChannelName,status:this.EnableIo?1:0},Object(s.b)("IoConfigure",e).then(function(e){e.result?(t.getData(),t.EditPrompt=!1):e.error&&t.utils.ToastMsg(0,2e3,e.error.message)}).catch(function(e){t.utils.DialogErr("Error message","Communication exception, please try again later!")})},EditCancel:function(){this.EditPrompt=!1},nameChange:function(){this.ChannelName=this.utils.inputLimit(this.ChannelName)}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Channel"},[a("div",{staticClass:"Channel-title"},[t._v("Inputs")]),t._v(" "),a("div",{staticClass:"Channel-content -mt20"},t._l(t.ChannelArr,function(e,n){return a("div",{key:e.id},[a("div",{staticClass:"Channel-item"},[a("div",{staticClass:"Channel-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"Channel-num"},[t._v("Channel "+t._s(e.id))]),t._v(" "),n<4?a("div",{staticClass:"Channel-volt"},[t._v("\n          "+t._s(e.voltType)+"\n        ")]):n>3&&0==e.status?a("div",{staticClass:"Channel-volt"},[t._v("\n          DISABLED\n        ")]):t._e(),t._v(" "),a("div",{staticClass:"Channel-switch",on:{click:function(a){return t.bindEditChannel(e)}}},[t._v("\n          Edit\n        ")])]),t._v(" "),3==n?a("div",{staticClass:"Channel-title -mt20 -pt10 -mb20"},[t._v("\n        Outputs\n      ")]):t._e()])}),0),t._v(" "),a("prompt",{directives:[{name:"show",rawName:"v-show",value:t.EditPrompt,expression:"EditPrompt"}]},[a("div",{staticClass:"prompt-c",attrs:{slot:"promtHtml"},slot:"promtHtml"},[a("span",{staticClass:"Briefprompt-close",on:{click:t.EditCancel}},[t._v("+")]),t._v(" "),a("p",{staticClass:"prompt-t"},[t._v("\n        Edit "+t._s(4>t.EditChannel.id?"input":"output")+"\n      ")]),t._v(" "),a("div",{staticClass:"prompt-row Enable-checked"},[a("van-checkbox",{attrs:{shape:"square","checked-color":"#26b167"},model:{value:t.EnableIo,callback:function(e){t.EnableIo=e},expression:"EnableIo"}},[t._v("Enable")])],1),t._v(" "),a("div",{staticClass:"prompt-row"},[a("label",{staticClass:"prompt-label"},[t._v("Channel number: "+t._s(t.EditChannel.id))])]),t._v(" "),a("div",{staticClass:"prompt-row"},[a("label",{staticClass:"prompt-label"},[t._v("Channel name:")]),t._v(" "),a("div",{staticClass:"prompt-inp-c"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ChannelName,expression:"ChannelName"}],staticClass:"prompt-input",attrs:{type:"text",id:"new_wifi_p"},domProps:{value:t.ChannelName},on:{input:[function(e){e.target.composing||(t.ChannelName=e.target.value)},t.nameChange]}})])]),t._v(" "),5>t.EditChannel.id?a("div",{staticClass:"prompt-row"},[a("label",{staticClass:"prompt-label"},[t._v("Input type:")]),t._v(" "),a("div",{staticClass:"prompt-inp-c"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.voltTypeSelect,expression:"voltTypeSelect"}],staticClass:"prompt-select",attrs:{id:"security"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.voltTypeSelect=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[t._v("Digital positive")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Digital negative")]),t._v(" "),a("option",{attrs:{value:"0"}},[t._v("Analog")])])])]):t._e(),t._v(" "),a("div",{staticClass:"prompt-btn -mt30"},[a("button",{staticClass:"prompt-ok",class:""==t.ChannelName?"btnDisa":"",attrs:{disabled:""==t.ChannelName,id:"newWifiOk"},on:{click:function(e){return e.stopPropagation(),t.EditOk(e)}}},[t._v("\n          Save\n        ")]),t._v(" "),a("button",{staticClass:"prompt-cancel",on:{click:function(e){return e.stopPropagation(),t.EditCancel(e)}}},[t._v("\n          Cancel\n        ")])])])])],1)},staticRenderFns:[]};var p=a("VU/8")(r,c,!1,function(t){a("DQAx")},"data-v-9f39b87c",null);e.default=p.exports}});